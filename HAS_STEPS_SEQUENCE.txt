FIND HAS FOR TIME - 2 MONTHS TO TODAY - TODAY WITH RALLY DURATRION 30 DAYS
IF HAS FOUND - 
1. IDENTIFY PATTERN TYPE BY SUPPLYING endDate as today.
2. NO BACKTESTING IF IDENTIFIED AS TYPE 1
3. BACKTESTING IF IDENTIFIED AS TYPE 2 - 
	a. FIND ALL HAS FOR TIME - 3 YEARS TO TODAY  - TODAY WITH RALLY DURATRION 30 DAYS
	b. FOR EACH HAS FOUND - 
		i. IDENTIFY PATTERN TYPE BY SUPPLYING cut_off_date = 2nd shoulder top + CALCULATED_SHOULDER_LOW_DURATION
		ii. if BREAKOUT DONE BY cut_off_date, CONFIDENCE CALCULATION IS :
			(success in getting low from neckline as much as head height ) 
			AND (not crossing neckline back) : confidence = MINIMUM POINT ATTAINED FROM NECKLINE * 100/
																HEIGHT OF HEAD FROM NECKLINE;
			ELSE confidence = 0;
	c.  Take mean of all confidence found in step b.ii .
	

	
--------------------XXXXXXXX-------------------XXXXXXXXXXXXXX---------------------XXXXXXXXXXXXXXXXX-----------------XXXXXXXXXXXXXXXXX------------------	


OLD SEQUENCE - 

FIND HAS FOR TIME - TODAY - 3 MONTHS TO TODAY WITH RALLY DURATRION 30 DAYS
IF HAS FOUND - 
1. IDENTIFY PATTERN TYPE BY SUPPLYING endDate as today.
2. CALCULATE DIFFERENCE BETWEEN endDate and 2nd shoulder top as 'LIVE_SHOULDER_LOW_DURATION'
2. using pattern_type_id, back test for 3 years -
	a. FIND HAS FOR TIME - TODAY - 3 YEARS TO TODAY WITH RALLY DURATRION 30 DAYS; BY SUPPLYING cut_off_date = 2nd shoulder top + LIVE_SHOULDER_LOW_DURATION
	b. FOR EACH HAS FOUND - 
		i. IDENTIFY PATTERN TYPE BY SUPPLYING cut_off_date = 2nd shoulder top + LIVE_SHOULDER_LOW_DURATION
		ii. if pattern type =  pattern type in step 1, calculate confidence as - 
			A. for type 1, (success in cutting neckline within CALCULATED_SHOULDER_LOW_DURATION ) 
			AND (not crossing 2nd shoulder top) : confidence (percentage) = CALCULATED_SHOULDER_LOW_DURATION * 100 /
																time taken to touch/cross neckline,
																
					ELSE confidence = 0;
			A. for type 2, (success in getting low from neckline as much as head height ) 
			AND (not crossing neckline back) : confidence = CALCULATED_SHOULDER_LOW_DURATION * 100/
																time taken to touch/cross neckline
					ELSE confidence = 0;
	c. Take mean of all confidence found in step b.
	
	
	
ASSUMPTIONS - 

1. VAR_TARGET_HAS_DURATION_FACTOR - FACTOR USED TO MULTIPLY RALLY DURATION TO CALCULATE RANGE OF CALCULATION DATA - 2 so e.g for 30 days rally duration, range of data is 60 days
2. VAR_BACKTESTING_DURATION_IN_YEARS = 3
3. HEAD_DUR_PERC_OF_RALLY - base factor - = 5%
4. CALCULATED_RALLY_TOP_DURATION =   ROUND(duration_days * HEAD_DUR_PERC_OF_RALLY ) - USED TO LIMIT DURATIONS BETWEEN IDENTIFYING RALLY TOPS - TO BE CORRECTED TO - 2 * ROUND(duration_days * HEAD_DUR_PERC_OF_RALLY )
5. CALCULATED_SHOULDER_HEAD_DURATION = 2 * ROUND(duration_days * HEAD_DUR_PERC_OF_RALLY ) - MAX DISTANCE BETWEEN 1ST SHOULDER AND HEAD
6. CALCULATED_RALLY_LOW_DURATION = ROUND(duration_days * HEAD_DUR_PERC_OF_RALLY ) - MAX DISTANCE BETWEEN TOP AND LOW FOR 1ST SHOULDER AND HEAD
7. CALCULATED_HEAD_TO_SHOULDER_DURATION = 2 * ROUND(duration_days * HEAD_DUR_PERC_OF_RALLY ) - MAX DISTANCE BETWEEN HEAD AND 2ND SHOULDER
8. VAR_MAX_NECKLINE_SLOPE_ABS_VALUE - MAX ABSOLUTE VALUE FOR NECKLINE SLOPE = 0.3
9. CALCULATED_SECOND_SHOULDER_TO_LOW_DURATION = ROUND(2 * duration_days * HEAD_DUR_PERC_OF_RALLY ) - MAX DISTANCE BETWEEN TOP AND LOW FOR 2ND SHOULDER 
10. FOR 30 DAYS DURATION, IF 2ND SHOULDER TOP IS TODAY, IT IS IDENTIFIED AS PATTERN TYPE 1, 
OTHERWISE - 0.2 * CALCULATED_SECOND_SHOULDER_TO_LOW_DURATION - MINIMUM DURATION TO MAKE 2ND SHOULDER LOW.
11. CALCULATED_SECOND_SHOULDER_TO_LOW_DURATION IS USED TO SEE IF PRICE SHOULD DROP TO CROSS NECKLINE IN THE DURATION OF CALCULATED_SECOND_SHOULDER_TO_LOW_DURATION FOR PATTERN TYPE 1. 









