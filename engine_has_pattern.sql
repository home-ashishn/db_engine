-- MySQL dump 10.13  Distrib 5.7.12, for Win64 (x86_64)
--
-- Host: 127.0.0.1    Database: engine_has_pattern
-- ------------------------------------------------------
-- Server version	5.7.16-log

/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8 */;
/*!40103 SET @OLD_TIME_ZONE=@@TIME_ZONE */;
/*!40103 SET TIME_ZONE='+00:00' */;
/*!40014 SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0 */;
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;
/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;
/*!40111 SET @OLD_SQL_NOTES=@@SQL_NOTES, SQL_NOTES=0 */;

--
-- Current Database: `engine_has_pattern`
--

CREATE DATABASE /*!32312 IF NOT EXISTS*/ `engine_has_pattern` /*!40100 DEFAULT CHARACTER SET utf8 */;

USE `engine_has_pattern`;

--
-- Table structure for table `backtest_has_confidence`
--

DROP TABLE IF EXISTS `backtest_has_confidence`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `backtest_has_confidence` (
  `has_id` int(11) NOT NULL,
  `confidence_value` float DEFAULT NULL,
  PRIMARY KEY (`has_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `backtest_has_confidence`
--

LOCK TABLES `backtest_has_confidence` WRITE;
/*!40000 ALTER TABLE `backtest_has_confidence` DISABLE KEYS */;
INSERT INTO `backtest_has_confidence` VALUES (133,105.042),(134,85.1852);
/*!40000 ALTER TABLE `backtest_has_confidence` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `equity_data_has_pattern`
--

DROP TABLE IF EXISTS `equity_data_has_pattern`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `equity_data_has_pattern` (
  `ROW_ID` int(5) NOT NULL AUTO_INCREMENT,
  `SYMBOL` varchar(45) NOT NULL,
  `CURR_DATE` date NOT NULL,
  `PREV_CLOSE` float(10,2) DEFAULT NULL,
  `OPEN_PRICE` float(10,2) DEFAULT NULL,
  `HIGH_PRICE` float(10,2) DEFAULT NULL,
  `LOW_PRICE` float(10,2) DEFAULT NULL,
  `LAST_PRICE` float(10,2) DEFAULT NULL,
  `CLOSE_PRICE` float(10,2) DEFAULT NULL,
  `AVERAGE_PRICE` float(10,2) DEFAULT NULL,
  `TOTAL_TRADED_QUANTITY` float(20,2) DEFAULT NULL,
  `TURNOVER` float(20,2) DEFAULT NULL,
  `NO_OF_TRADES` int(11) DEFAULT NULL,
  `DELIVERABLE_QTY` int(11) DEFAULT NULL,
  `PERCENT_DELIVERABLE_QTY` float(10,2) DEFAULT NULL,
  PRIMARY KEY (`ROW_ID`)
) ENGINE=InnoDB AUTO_INCREMENT=512 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `equity_data_has_pattern`
--

LOCK TABLES `equity_data_has_pattern` WRITE;
/*!40000 ALTER TABLE `equity_data_has_pattern` DISABLE KEYS */;
INSERT INTO `equity_data_has_pattern` VALUES (1,'SBIN','2015-10-09',243.30,245.50,247.80,240.65,242.90,243.45,244.94,12171416.00,2981319936.00,105441,4413072,36.26),(2,'SBIN','2015-10-12',243.45,244.10,245.65,241.30,244.15,244.55,244.27,7566962.00,1848345472.00,57702,2819307,37.26),(3,'SBIN','2015-10-13',244.55,244.00,247.50,242.05,243.90,243.80,244.56,10200698.00,2494711808.00,73013,4105359,40.25),(4,'SBIN','2015-10-14',243.80,243.70,246.80,243.20,245.00,244.25,244.82,7895820.00,1933055744.00,55278,3212893,40.69),(5,'SBIN','2015-10-15',244.25,246.00,249.90,245.50,249.05,248.95,248.42,11582401.00,2877244416.00,86325,3894772,33.63),(6,'SBIN','2015-10-16',248.95,249.85,257.15,248.35,256.80,254.85,251.84,11738832.00,2956324864.00,84407,3725598,31.74),(7,'SBIN','2015-10-19',254.85,256.65,257.10,253.50,254.05,254.50,255.14,8969153.00,2288375296.00,60162,3568861,39.79),(8,'SBIN','2015-10-20',254.50,254.50,257.10,253.20,254.80,254.85,255.05,8811740.00,2247392000.00,58553,3517593,39.92),(9,'SBIN','2015-10-21',254.85,254.00,255.90,248.55,249.40,249.80,251.41,8606466.00,2163720192.00,58318,2410439,28.01),(10,'SBIN','2015-10-23',249.80,253.00,254.85,252.00,253.15,253.40,253.43,7544810.00,1912097280.00,77411,2907459,38.54),(11,'SBIN','2015-10-26',253.40,254.75,256.00,250.35,251.40,251.25,253.24,13085058.00,3313622272.00,82870,5753097,43.97),(12,'SBIN','2015-10-27',251.25,250.10,252.20,248.10,248.40,248.80,250.09,6565348.00,1641911936.00,59563,2711105,41.29),(13,'SBIN','2015-10-28',248.80,248.00,249.45,241.20,241.70,242.05,243.96,12310403.00,3003224064.00,92805,5871480,47.70),(14,'SBIN','2015-10-29',242.05,241.50,241.80,236.45,237.00,236.95,238.58,16114932.00,3844694016.00,92417,7947307,49.32),(15,'SBIN','2015-10-30',236.95,238.70,240.40,235.10,237.25,237.05,237.93,8669606.00,2062774656.00,74888,3122553,36.02),(16,'SBIN','2015-11-02',237.05,238.00,238.00,232.70,237.45,236.90,235.49,7611610.00,1792459392.00,72432,1800392,23.65),(17,'SBIN','2015-11-03',236.90,239.35,239.70,235.00,236.55,235.95,237.25,8323201.00,1974696960.00,70852,2819673,33.88),(18,'SBIN','2015-11-04',235.95,239.20,240.50,237.00,238.85,239.00,238.81,8418352.00,2010386944.00,54933,3210999,38.14),(19,'SBIN','2015-11-05',239.00,238.00,239.00,233.10,234.00,233.90,236.12,8906564.00,2103032192.00,78782,2876222,32.29),(20,'SBIN','2015-11-06',233.90,235.60,244.80,233.00,243.90,243.00,241.02,30821076.00,7428582400.00,205921,5847777,18.97),(21,'SBIN','2015-11-09',243.00,236.00,248.30,235.60,245.65,246.10,244.83,22806484.00,5583806464.00,169076,8669018,38.01),(22,'SBIN','2015-11-10',246.10,244.90,247.25,240.10,241.30,241.20,243.15,11767845.00,2861354240.00,81141,2845909,24.18),(23,'SBIN','2015-11-11',241.20,243.00,244.25,242.55,243.20,243.15,243.28,2061681.00,501567840.00,24738,830764,40.30),(24,'SBIN','2015-11-13',243.15,241.50,241.80,237.70,240.30,240.25,239.92,9082062.00,2178937088.00,68168,2716416,29.91),(25,'SBIN','2015-11-16',240.25,239.50,249.35,239.10,249.00,248.30,245.34,14051479.00,3447347200.00,99089,4847882,34.50),(26,'SBIN','2015-11-17',248.30,250.00,251.65,246.70,247.60,247.85,248.93,11273394.00,2806306048.00,82525,2733402,24.25),(27,'SBIN','2015-11-18',247.85,247.60,248.70,239.45,240.45,241.00,243.75,10397889.00,2534511616.00,77659,2986573,28.72),(28,'SBIN','2015-11-19',241.00,243.05,245.00,241.40,244.25,243.90,243.54,7325199.00,1783978240.00,51700,1940649,26.49),(29,'SBIN','2015-11-20',243.90,243.95,249.90,242.00,243.00,242.95,245.51,13718619.00,3368019200.00,80095,4016945,29.28),(30,'SBIN','2015-11-23',242.95,243.90,245.25,240.55,242.60,242.70,243.15,10552151.00,2565804800.00,65107,3008834,28.51),(31,'SBIN','2015-11-24',242.70,242.50,244.00,240.60,241.60,241.40,242.47,6651669.00,1612833920.00,52769,1758561,26.44),(32,'SBIN','2015-11-26',241.40,241.95,244.90,241.00,243.50,242.50,243.10,13629888.00,3313401856.00,74502,6389328,46.88),(33,'SBIN','2015-11-27',242.50,243.00,250.50,242.80,249.60,249.70,247.42,15149912.00,3748351744.00,95949,5447738,35.96),(34,'SBIN','2015-11-30',249.70,249.65,253.00,245.00,248.65,250.20,250.91,12865469.00,3228127744.00,107373,6136099,47.69),(35,'SBIN','2015-12-01',250.20,250.85,251.90,249.30,249.95,250.20,250.54,9501537.00,2380516096.00,74258,2532816,26.66),(36,'SBIN','2015-12-02',250.20,250.55,250.65,243.75,244.55,244.60,245.93,10881754.00,2676155904.00,85982,3835915,35.25),(37,'SBIN','2015-12-03',244.60,244.15,244.50,240.40,241.50,241.10,242.52,7155630.00,1735388928.00,53130,2004524,28.01),(38,'SBIN','2015-12-04',241.10,240.00,242.15,238.05,241.75,241.10,240.27,11115170.00,2670611456.00,81492,4650194,41.84),(39,'SBIN','2015-12-07',241.10,242.95,242.95,238.00,238.90,238.65,239.77,7531729.00,1805861120.00,65807,2924376,38.83),(40,'SBIN','2015-12-08',238.65,238.10,239.95,235.30,235.40,235.95,237.46,8254434.00,1960116992.00,65633,3060162,37.07),(41,'SBIN','2015-12-09',235.95,235.40,238.20,233.60,235.00,234.40,235.80,7408777.00,1746990080.00,60770,2281810,30.80),(42,'SBIN','2015-12-10',234.40,236.00,236.75,230.60,232.00,231.95,232.64,11713559.00,2725084928.00,110656,4727421,40.36),(43,'SBIN','2015-12-11',231.95,232.90,233.90,225.10,227.20,227.30,228.87,12872949.00,2946294016.00,107212,3731130,28.98),(44,'SBIN','2015-12-14',227.30,224.90,227.70,224.00,225.60,225.95,225.97,12464883.00,2816646656.00,196552,4760215,38.19),(45,'SBIN','2015-12-15',225.95,227.00,227.15,224.00,226.00,226.40,225.50,10404430.00,2346223872.00,88956,4049571,38.92),(46,'SBIN','2015-12-16',226.40,227.75,229.60,225.25,227.20,227.30,227.63,13030720.00,2966149632.00,90557,5255900,40.33),(47,'SBIN','2015-12-17',227.30,230.00,232.40,228.50,231.00,230.90,230.70,14539096.00,3354140672.00,111133,5819355,40.03),(48,'SBIN','2015-12-18',230.90,229.95,232.35,225.80,226.25,226.50,228.89,18871084.00,4319445504.00,133177,10090333,53.47),(49,'SBIN','2015-12-21',226.50,226.90,231.00,226.50,230.50,230.45,229.56,9557098.00,2193929472.00,82470,3058303,32.00),(50,'SBIN','2015-12-22',230.45,231.65,232.25,227.50,228.65,228.35,230.09,9155574.00,2106647808.00,69702,3457655,37.77),(51,'SBIN','2015-12-23',228.35,230.25,231.00,228.90,229.75,229.65,230.10,7914311.00,1821091840.00,55788,3057822,38.64),(52,'SBIN','2015-12-24',229.65,230.85,231.00,227.60,228.50,228.30,228.67,7257958.00,1659698944.00,47333,2670535,36.79),(53,'SBIN','2015-12-28',228.30,229.05,229.95,228.00,228.60,228.90,228.99,8756879.00,2005222528.00,60826,4081164,46.61),(54,'SBIN','2015-12-29',228.90,228.85,229.95,227.50,228.40,228.20,228.69,7263286.00,1661012992.00,88491,3245714,44.69),(55,'SBIN','2015-12-30',228.20,229.00,229.70,224.85,225.95,225.80,226.98,11702877.00,2656287744.00,78824,5267755,45.01),(56,'SBIN','2015-12-31',225.80,225.95,226.55,224.00,224.75,224.45,224.86,11558305.00,2599041536.00,70055,5703494,49.35),(57,'SBIN','2016-01-01',224.45,225.00,228.90,224.50,227.75,227.80,226.94,6449426.00,1463600640.00,49529,1376633,21.35),(58,'SBIN','2016-01-04',227.80,226.95,226.95,220.05,221.10,220.70,222.80,14092071.00,3139744256.00,113875,5337291,37.87),(59,'SBIN','2016-01-05',220.70,222.80,222.80,217.00,217.75,217.75,219.46,15074848.00,3308361984.00,137290,6241116,41.40),(60,'SBIN','2016-01-06',217.75,217.90,219.90,216.40,217.00,216.85,218.00,11921123.00,2598851584.00,96992,3750530,31.46),(61,'SBIN','2016-01-07',216.85,214.00,214.10,209.00,209.75,209.55,210.81,14342279.00,3023488512.00,131516,5943545,41.44),(62,'SBIN','2016-01-08',209.55,212.00,212.50,208.60,208.90,208.95,209.90,11745840.00,2465445632.00,93167,5271984,44.88),(63,'SBIN','2016-01-11',208.95,206.80,207.50,202.65,204.95,204.30,204.70,19287860.00,3948218624.00,127131,8279250,42.92),(64,'SBIN','2016-01-12',204.30,204.85,205.00,198.60,199.60,199.40,201.27,20318816.00,4089639424.00,160629,7870525,38.74),(65,'SBIN','2016-01-13',199.40,201.35,202.40,194.00,201.20,200.90,199.04,23788248.00,4734784512.00,162555,8480922,35.65),(66,'SBIN','2016-01-14',200.90,197.00,201.50,194.30,195.85,196.05,197.76,20256636.00,4005991936.00,148958,6902124,34.07),(67,'SBIN','2016-01-15',196.05,197.80,197.80,181.00,183.30,184.30,189.55,29090426.00,5514120704.00,207300,11842577,40.71),(68,'SBIN','2016-01-18',184.30,184.90,188.15,179.15,180.85,181.00,183.50,35653244.00,6542261760.00,218962,12666569,35.53),(69,'SBIN','2016-01-19',181.00,182.15,187.80,181.50,183.50,182.95,184.33,24501774.00,4516339712.00,153915,8985848,36.67),(70,'SBIN','2016-01-20',182.95,180.65,180.65,171.50,173.55,173.65,175.17,28655794.00,5019493888.00,247132,9898232,34.54),(71,'SBIN','2016-01-21',173.65,177.00,178.65,172.05,176.20,175.60,175.34,28697204.00,5031862784.00,218633,9727017,33.90),(72,'SBIN','2016-01-22',175.60,179.90,185.40,178.30,184.65,184.60,182.62,21432408.00,3913915392.00,141051,6171382,28.79),(73,'SBIN','2016-01-25',184.60,187.90,188.80,182.50,182.80,182.95,185.41,17534650.00,3251080448.00,120763,7394303,42.17),(74,'SBIN','2016-01-27',182.95,184.40,186.20,181.05,184.00,184.40,184.03,16569813.00,3049399552.00,116934,5078517,30.65),(75,'SBIN','2016-01-28',184.40,184.20,185.90,182.50,185.75,185.25,184.54,20241030.00,3735335168.00,84669,8805278,43.50),(76,'SBIN','2016-01-29',185.25,184.20,185.75,178.10,179.55,179.90,180.55,24259148.00,4380071424.00,156963,9256118,38.16),(77,'SBIN','2016-02-01',179.90,181.95,181.95,172.10,172.90,172.75,175.47,22915268.00,4021007360.00,159984,8090322,35.31),(78,'SBIN','2016-02-02',172.75,173.10,177.40,168.60,168.90,169.40,172.63,35957332.00,6207324160.00,241010,7065437,19.65),(79,'SBIN','2016-02-03',169.40,167.80,167.80,163.25,166.85,166.05,165.82,24132004.00,4001491968.00,196005,7595019,31.47),(80,'SBIN','2016-02-04',166.05,169.30,169.80,160.20,164.00,162.85,164.85,23811108.00,3925151232.00,145796,5207340,21.87),(81,'SBIN','2016-02-05',162.85,163.70,169.30,162.20,168.80,168.20,166.31,22732244.00,3780668672.00,131919,7713016,33.93),(82,'SBIN','2016-02-08',168.20,169.45,176.90,168.55,171.40,172.15,173.81,22289004.00,3874016768.00,166535,5007365,22.47),(83,'SBIN','2016-02-09',172.15,168.00,172.40,166.10,167.30,167.05,168.90,19008384.00,3210602240.00,116605,2931677,15.42),(84,'SBIN','2016-02-10',167.05,165.00,166.20,158.00,159.00,159.00,161.79,32294784.00,5224865280.00,189650,13222447,40.94),(85,'SBIN','2016-02-11',159.00,159.50,167.50,152.20,154.60,154.25,159.23,72749832.00,11584246784.00,412974,13888236,19.09),(86,'SBIN','2016-02-12',154.25,156.15,157.65,148.25,154.45,154.80,152.21,41187888.00,6269136896.00,259269,10036234,24.37),(87,'SBIN','2016-02-15',154.80,159.00,170.00,158.00,167.40,167.85,165.37,35956264.00,5946004480.00,216295,9513571,26.46),(88,'SBIN','2016-02-16',167.85,170.75,170.75,155.65,156.35,156.40,161.86,33816244.00,5473634304.00,198775,7858511,23.24),(89,'SBIN','2016-02-17',156.40,155.00,159.85,151.25,159.65,158.95,155.99,32447698.00,5061596160.00,200965,5068204,15.62),(90,'SBIN','2016-02-18',158.95,161.95,163.70,156.40,159.00,159.80,160.01,21024178.00,3364140544.00,130870,3551875,16.89),(91,'SBIN','2016-02-19',159.80,157.90,165.30,157.10,164.95,164.70,162.94,24592576.00,4007070208.00,171593,6246258,25.40),(92,'SBIN','2016-02-22',164.70,165.95,166.80,163.70,165.00,164.95,165.08,15815058.00,2610753536.00,135649,4217430,26.67),(93,'SBIN','2016-02-23',164.95,165.00,165.00,158.00,158.60,158.50,160.42,20200068.00,3240512768.00,134729,5202659,25.76),(94,'SBIN','2016-02-24',158.50,156.00,160.70,155.30,156.65,156.30,158.08,19440950.00,3073199360.00,121891,4004709,20.60),(95,'SBIN','2016-02-25',156.30,157.60,158.10,151.00,152.00,151.80,153.89,22713124.00,3495358464.00,142201,7407606,32.61),(96,'SBIN','2016-02-26',151.80,155.50,158.70,152.55,157.00,155.90,155.78,30051402.00,4681280000.00,176437,7282242,24.23),(97,'SBIN','2016-02-29',155.90,158.20,163.90,153.00,159.45,158.75,159.44,66981912.00,10679889920.00,373065,14012660,20.92),(98,'SBIN','2016-03-01',158.75,160.50,162.90,158.55,162.80,162.05,161.19,23588232.00,3802269440.00,153474,6410530,27.18),(99,'SBIN','2016-03-02',162.05,172.50,183.20,172.50,182.40,181.15,177.82,53333756.00,9483964416.00,288251,16432378,30.81),(100,'SBIN','2016-03-03',181.15,184.00,184.60,178.50,183.60,182.75,181.28,33507048.00,6074173952.00,192218,6099812,18.20),(101,'SBIN','2016-03-04',182.75,183.40,189.85,178.50,189.10,188.40,185.00,38860712.00,7189420032.00,212758,6154362,15.84),(102,'SBIN','2016-03-08',188.40,186.95,186.95,181.40,183.10,183.35,184.19,27928280.00,5144161792.00,167308,7429060,26.60),(103,'SBIN','2016-03-09',183.35,180.00,184.00,178.70,183.45,183.40,181.72,29453018.00,5352122880.00,149605,9260103,31.44),(104,'SBIN','2016-03-10',183.40,184.75,184.75,179.40,180.35,180.50,181.51,20472928.00,3715971840.00,111536,4857524,23.73),(105,'SBIN','2016-03-11',180.50,180.00,182.65,177.55,180.55,180.10,180.26,21869156.00,3942241280.00,117055,5271999,24.11),(106,'SBIN','2016-03-14',180.10,182.45,183.40,180.70,181.70,181.75,181.80,14369755.00,2612424192.00,90248,3518160,24.48),(107,'SBIN','2016-03-15',181.75,181.65,186.20,181.65,185.05,185.30,184.71,22369600.00,4131972608.00,154226,6779447,30.31),(108,'SBIN','2016-03-16',185.30,185.00,185.90,181.60,185.60,185.20,184.15,19237834.00,3542620928.00,107162,4673661,24.29),(109,'SBIN','2016-03-17',185.20,188.00,189.30,185.00,185.20,186.35,187.64,21560986.00,4045649920.00,140622,6997724,32.46),(110,'SBIN','2016-03-18',186.35,186.85,192.00,186.00,191.50,191.25,189.06,21144216.00,3997511168.00,134926,6611156,31.27),(111,'SBIN','2016-03-21',191.25,193.00,197.30,193.00,197.05,196.80,195.30,20678068.00,4038513920.00,143523,6513731,31.50),(112,'SBIN','2016-03-22',196.80,196.80,198.25,194.50,197.90,197.50,196.38,16728809.00,3285173248.00,116859,3908068,23.36),(113,'SBIN','2016-03-23',197.50,196.90,197.60,195.30,196.25,196.60,196.39,13362780.00,2624328960.00,79259,3499361,26.19),(114,'SBIN','2016-03-28',196.60,195.80,198.25,187.65,188.70,188.30,192.01,19760604.00,3794322176.00,122344,7729975,39.12),(115,'SBIN','2016-03-29',188.30,188.50,191.25,186.65,189.30,189.50,189.51,16804848.00,3184611840.00,97810,3973615,23.65),(116,'SBIN','2016-03-30',189.50,192.25,198.30,190.50,197.05,197.55,194.81,20709408.00,4034427648.00,126461,4691725,22.66),(117,'SBIN','2016-03-31',197.55,197.85,198.75,192.35,194.00,194.25,195.64,30132472.00,5894971904.00,149396,12518461,41.54),(118,'SBIN','2016-04-01',194.25,193.70,197.25,192.00,195.25,195.65,195.16,21752206.00,4245259264.00,115244,6555959,30.14),(119,'SBIN','2016-04-04',195.65,197.30,197.45,192.55,194.75,194.70,194.94,15732565.00,3066857984.00,97228,4957251,31.51),(120,'SBIN','2016-04-05',194.70,193.90,194.55,183.30,183.75,184.35,189.13,36635636.00,6928984064.00,225354,9409530,25.68),(121,'SBIN','2016-04-06',184.35,185.00,185.50,182.20,183.80,183.85,184.04,16350631.00,3009183232.00,118379,3029153,18.53),(122,'SBIN','2016-04-07',183.85,183.80,185.65,181.00,182.00,176.95,183.24,19430600.00,3560435968.00,128307,3728079,19.19),(123,'SBIN','2016-04-08',181.95,181.65,183.95,180.20,183.45,178.10,182.68,15805231.00,2887350784.00,106622,3846954,24.34),(124,'SBIN','2016-04-11',183.10,183.85,188.90,182.00,188.45,183.25,185.17,18990364.00,3516413440.00,106419,5162794,27.19),(125,'SBIN','2016-04-12',188.25,188.50,190.25,186.30,188.00,187.80,188.33,14563344.00,2742691584.00,86118,3429723,23.55),(126,'SBIN','2016-04-13',187.80,191.55,193.80,190.80,191.35,191.90,192.18,17573044.00,3377105920.00,112945,4692528,26.70),(127,'SBIN','2016-04-18',191.90,191.45,191.50,185.60,186.55,186.75,187.49,13985439.00,2622133248.00,100989,4213356,30.13),(128,'SBIN','2016-04-20',186.75,188.35,188.65,184.10,187.60,187.30,186.58,20163004.00,3762010368.00,125867,5582860,27.69),(129,'SBIN','2016-04-21',187.30,190.50,197.40,190.00,193.50,194.35,194.77,31008152.00,6039360000.00,157469,10222408,32.97),(130,'SBIN','2016-04-22',194.35,193.60,201.50,191.55,200.25,200.15,198.29,34049764.00,6751869952.00,194929,9141444,26.85),(131,'SBIN','2016-04-25',200.15,200.95,202.55,195.80,197.35,197.05,199.38,23835612.00,4752396288.00,135454,6226085,26.12),(132,'SBIN','2016-04-26',197.05,195.95,201.40,194.55,200.80,200.95,198.76,21809452.00,4334812160.00,126638,4502133,20.64),(133,'SBIN','2016-04-27',200.95,200.90,200.90,195.50,196.05,196.15,197.97,22801604.00,4513952256.00,118308,7808736,34.25),(134,'SBIN','2016-04-28',196.15,196.75,198.20,191.20,192.10,192.05,194.50,24555480.00,4776038400.00,185568,10059264,40.97),(135,'SBIN','2016-04-29',192.05,191.90,194.00,186.45,188.90,189.00,190.12,21021660.00,3996623616.00,134907,4406039,20.96),(136,'SBIN','2016-05-02',189.00,187.60,188.45,185.50,185.95,186.00,186.83,14469844.00,2703342336.00,84815,3860773,26.68),(137,'SBIN','2016-05-03',186.00,187.00,189.35,183.65,183.90,184.05,186.56,16247931.00,3031162368.00,92539,4008897,24.67),(138,'SBIN','2016-05-04',184.05,183.50,184.40,179.15,179.70,179.95,181.86,17826594.00,3241988352.00,118748,4901295,27.49),(139,'SBIN','2016-05-05',179.95,180.25,182.70,178.50,180.65,180.35,180.48,17742028.00,3202036480.00,129687,3447797,19.43),(140,'SBIN','2016-05-06',180.35,180.95,184.95,180.10,184.15,184.35,183.08,18336962.00,3357150464.00,99937,4510089,24.60),(141,'SBIN','2016-05-09',184.35,186.50,189.40,185.05,188.70,188.70,187.21,13863696.00,2595393280.00,76040,3198259,23.07),(142,'SBIN','2016-05-10',188.70,187.60,190.30,186.70,189.40,189.50,188.74,13845979.00,2613255424.00,109702,4353655,31.44),(143,'SBIN','2016-05-11',189.50,185.40,188.50,184.10,185.15,185.00,186.54,18128414.00,3381624832.00,94967,6402437,35.32),(144,'SBIN','2016-05-12',185.00,187.10,189.50,185.40,188.80,188.50,187.71,17398340.00,3265888256.00,96170,4968527,28.56),(145,'SBIN','2016-05-13',188.50,187.95,187.95,184.30,184.90,184.85,185.29,15546644.00,2880581120.00,65101,5538257,35.62),(146,'SBIN','2016-05-16',184.85,185.00,185.00,175.15,177.15,176.80,177.52,30937008.00,5491952640.00,189216,12541213,40.54),(147,'SBIN','2016-05-17',176.80,178.50,178.60,175.25,177.10,176.85,176.78,22183140.00,3921559552.00,114958,7445207,33.56),(148,'SBIN','2016-05-18',176.85,176.90,180.45,173.55,180.00,179.95,178.53,25345278.00,4524816896.00,137843,6854944,27.05),(149,'SBIN','2016-05-19',179.95,181.00,181.00,171.90,172.45,172.70,175.82,25480516.00,4480018432.00,133413,10347052,40.61),(150,'SBIN','2016-05-20',172.70,173.50,174.70,170.55,171.70,171.35,172.76,16720624.00,2888653312.00,107822,4437666,26.54),(151,'SBIN','2016-05-23',171.35,172.30,172.70,168.20,168.45,168.40,169.83,16193112.00,2749996032.00,99857,5094469,31.46),(152,'SBIN','2016-05-24',168.40,168.80,170.40,166.40,170.05,169.50,168.18,14816798.00,2491883520.00,89086,4821757,32.54),(153,'SBIN','2016-05-25',169.50,171.50,175.80,171.45,174.75,175.10,173.83,18900888.00,3285447168.00,103155,7722398,40.86),(154,'SBIN','2016-05-26',175.10,175.10,185.50,173.50,184.55,184.15,180.13,30700988.00,5530238464.00,167461,12229884,39.84),(155,'SBIN','2016-05-27',184.15,184.00,202.40,181.50,201.30,195.90,189.38,85585824.00,16208396288.00,447197,18274572,21.35),(156,'SBIN','2016-05-30',195.90,200.20,203.90,194.60,197.80,198.85,198.46,46075948.00,9144309760.00,246811,14953723,32.45),(157,'SBIN','2016-05-31',198.85,198.80,205.70,196.20,205.30,204.95,201.54,39457648.00,7952388608.00,227995,11774756,29.84),(158,'SBIN','2016-06-01',204.95,205.95,208.30,196.60,198.60,198.25,202.84,41868032.00,8492606464.00,215016,10871586,25.97),(159,'SBIN','2016-06-02',198.25,197.85,202.30,195.55,200.60,200.55,199.11,23499884.00,4679014912.00,157035,3621222,15.41),(160,'SBIN','2016-06-03',200.55,201.00,202.15,195.40,196.25,196.60,198.81,24568748.00,4884542976.00,126039,4648593,18.92),(161,'SBIN','2016-06-06',196.60,197.45,202.60,197.10,198.75,198.90,199.55,23623536.00,4714028544.00,132639,5880974,24.89),(162,'SBIN','2016-06-07',198.90,200.45,211.15,200.15,210.15,210.15,205.82,66063192.00,13597283328.00,363240,18623978,28.19),(163,'SBIN','2016-06-08',210.15,210.15,211.90,207.55,209.90,210.70,210.28,35163092.00,7394208256.00,191274,10519149,29.92),(164,'SBIN','2016-06-09',210.70,210.00,212.80,208.30,209.50,209.95,210.61,27858182.00,5867210240.00,155374,6530703,23.44),(165,'SBIN','2016-06-10',209.95,209.35,211.50,205.30,206.10,205.95,208.39,25598224.00,5334414848.00,138243,6059206,23.67),(166,'SBIN','2016-06-13',205.95,201.50,202.60,200.20,202.50,201.80,201.58,21192524.00,4272038400.00,122783,5211906,24.59),(167,'SBIN','2016-06-14',201.80,204.35,208.60,203.80,208.20,207.70,205.99,23918910.00,4927151616.00,129701,4916156,20.55),(168,'SBIN','2016-06-15',207.70,209.75,217.55,208.55,215.25,216.05,213.78,48362744.00,10338917376.00,262445,8804444,18.21),(169,'SBIN','2016-06-16',216.05,216.00,218.50,213.05,215.15,216.00,215.77,48122380.00,10383604736.00,285087,10889526,22.63),(170,'SBIN','2016-06-17',216.00,216.75,217.50,211.60,212.90,213.45,214.70,26486676.00,5686609408.00,178438,7332337,27.68),(171,'SBIN','2016-06-20',213.45,208.00,216.70,207.90,215.25,215.90,213.81,32633756.00,6977292288.00,175144,7768315,23.80),(172,'SBIN','2016-06-21',215.90,215.00,217.50,213.15,213.50,214.00,215.39,18960306.00,4083821824.00,130024,5087373,26.83),(173,'SBIN','2016-06-22',214.00,214.00,215.25,211.45,212.90,212.90,213.42,16395548.00,3499126272.00,98467,3630782,22.14),(174,'SBIN','2016-06-23',212.90,213.00,218.00,212.75,217.80,217.55,215.84,20666648.00,4460588032.00,125144,6492054,31.41),(175,'SBIN','2016-06-24',217.55,205.90,212.35,202.50,211.00,211.25,207.89,47224652.00,9817308160.00,247777,10074190,21.33),(176,'SBIN','2016-06-27',211.25,210.80,218.85,210.55,216.80,217.15,216.30,29021652.00,6277238272.00,159297,6765720,23.31),(177,'SBIN','2016-06-28',217.15,216.75,218.65,215.40,215.70,215.90,216.63,21784062.00,4718985728.00,119038,7812921,35.87),(178,'SBIN','2016-06-29',215.90,217.90,218.80,216.10,217.30,217.20,217.43,18019568.00,3918060032.00,88033,4227588,23.46),(179,'SBIN','2016-06-30',217.20,220.00,221.90,217.90,219.30,218.80,219.92,30600996.00,6729755136.00,134433,8573520,28.02),(180,'SBIN','2016-07-01',218.80,220.80,221.00,218.90,219.20,219.60,219.93,15346865.00,3375271168.00,76742,4010619,26.13),(181,'SBIN','2016-07-04',219.60,222.35,224.35,222.00,222.90,223.00,223.16,16534518.00,3689841920.00,92943,3792823,22.94),(182,'SBIN','2016-07-05',223.00,223.25,225.15,221.55,223.00,223.50,223.72,15357018.00,3435729152.00,102896,4498810,29.29),(183,'SBIN','2016-07-07',223.50,223.90,224.60,219.35,220.15,220.05,222.32,12917872.00,2871840000.00,68075,4030925,31.20),(184,'SBIN','2016-07-08',220.05,220.15,220.85,216.50,218.20,218.30,218.11,16017389.00,3493620992.00,96813,5367678,33.51),(185,'SBIN','2016-07-11',218.30,223.60,225.45,222.00,224.50,224.70,223.59,15831791.00,3539855616.00,82208,5654844,35.72),(186,'SBIN','2016-07-12',224.70,225.00,227.20,224.15,226.75,226.70,226.10,19374180.00,4380494848.00,96849,7895882,40.75),(187,'SBIN','2016-07-13',226.70,227.00,228.50,223.95,226.75,227.70,226.83,18377332.00,4168619264.00,102415,5491345,29.88),(188,'SBIN','2016-07-14',227.70,227.00,232.85,226.00,231.75,232.00,230.43,21208020.00,4886952448.00,124475,5697439,26.86),(189,'SBIN','2016-07-15',232.00,232.90,234.40,230.80,231.00,231.50,232.42,15068302.00,3502113280.00,80928,3992784,26.50),(190,'SBIN','2016-07-18',231.50,232.40,233.85,228.20,228.60,228.75,231.31,11816985.00,2733412352.00,74478,2809230,23.77),(191,'SBIN','2016-07-19',228.75,230.00,232.15,227.00,229.45,229.60,229.75,19767340.00,4541472768.00,104305,5887813,29.79),(192,'SBIN','2016-07-20',229.60,230.65,232.75,229.20,230.85,231.15,231.32,18051608.00,4175707904.00,117048,7025409,38.92),(193,'SBIN','2016-07-21',231.15,231.65,232.10,224.40,224.80,225.65,228.81,13306837.00,3044684800.00,67925,3657509,27.49),(194,'SBIN','2016-07-22',225.65,225.40,225.90,222.10,223.45,223.50,223.92,12341622.00,2763588096.00,63031,3019454,24.47),(195,'SBIN','2016-07-25',223.50,223.00,231.00,222.70,229.60,229.90,228.36,18427070.00,4207974656.00,101405,5910707,32.08),(196,'SBIN','2016-07-26',229.90,230.00,232.20,225.90,226.80,226.70,229.45,14162638.00,3249661952.00,87233,4999906,35.30),(197,'SBIN','2016-07-27',226.70,227.75,231.00,226.80,229.40,229.25,228.85,17626616.00,4033799424.00,88800,6547726,37.15),(198,'SBIN','2016-07-28',229.25,230.15,235.15,229.30,230.20,231.00,232.13,26838284.00,6229966848.00,134747,11330407,42.22),(199,'SBIN','2016-07-29',231.00,230.00,232.70,228.40,230.15,229.40,230.56,15577230.00,3591426048.00,86038,5904691,37.91),(200,'SBIN','2016-08-01',229.40,230.80,232.65,225.30,227.75,227.30,228.31,16071228.00,3669246720.00,84451,6622550,41.21),(201,'SBIN','2016-08-02',227.30,229.30,230.90,227.30,228.10,228.05,228.80,16145066.00,3693918464.00,79842,6134616,38.00),(202,'SBIN','2016-08-03',228.05,228.50,230.50,225.80,226.55,226.65,228.26,14838944.00,3387178752.00,73601,6312310,42.54),(203,'SBIN','2016-08-04',226.65,228.45,228.70,223.20,226.20,225.65,225.75,17810908.00,4020831232.00,86508,7884902,44.27),(204,'SBIN','2016-08-05',225.65,227.35,233.90,226.90,231.85,232.75,232.09,21264296.00,4935293440.00,113047,8017919,37.71),(205,'SBIN','2016-08-08',232.75,233.95,235.90,231.70,232.65,233.25,233.54,16972828.00,3963838720.00,79004,5892060,34.71),(206,'SBIN','2016-08-09',233.25,234.25,238.00,232.65,235.50,235.15,234.92,19854184.00,4664086528.00,109330,5586660,28.14),(207,'SBIN','2016-08-10',235.15,236.75,236.90,231.05,231.25,231.50,232.96,16279843.00,3792544000.00,88530,6296050,38.67),(208,'SBIN','2016-08-11',231.50,231.50,231.60,226.10,226.90,227.15,227.78,16673286.00,3797846528.00,68150,6755104,40.51),(209,'SBIN','2016-08-12',227.15,227.00,247.95,224.40,243.60,243.30,240.56,86616472.00,20836726784.00,458828,24769437,28.60),(210,'SBIN','2016-08-16',243.30,245.25,247.90,242.65,246.20,246.75,245.15,27709872.00,6792957440.00,135110,6723968,24.27),(211,'SBIN','2016-08-17',246.75,246.45,249.80,244.30,245.30,246.25,246.63,18294050.00,4511949312.00,123640,2962279,16.19),(212,'SBIN','2016-08-18',246.25,246.90,250.40,246.55,248.20,248.40,248.77,14314950.00,3561094144.00,82107,3773825,26.36),(213,'SBIN','2016-08-19',248.40,255.00,260.00,253.50,258.50,258.50,256.76,39822528.00,10224911360.00,209689,11933585,29.97),(214,'SBIN','2016-08-22',258.50,259.80,260.40,254.00,254.15,254.80,256.81,19769886.00,5077060096.00,140995,6913670,34.97),(215,'SBIN','2016-08-23',254.80,254.90,255.80,251.00,255.30,254.75,253.26,17583720.00,4453336576.00,110480,5392781,30.67),(216,'SBIN','2016-08-24',254.75,254.95,256.20,253.50,254.15,254.40,254.58,11560293.00,2942994432.00,90982,3132584,27.10),(217,'SBIN','2016-08-25',254.40,254.90,255.55,248.60,249.50,250.15,251.92,21230706.00,5348357632.00,107161,10496184,49.44),(218,'SBIN','2016-08-26',250.15,250.30,250.70,245.85,246.35,246.60,247.59,16531983.00,4093119232.00,123619,7833851,47.39),(219,'SBIN','2016-08-29',246.60,245.85,249.85,244.25,249.45,249.05,246.94,11786129.00,2910466560.00,105538,3560636,30.21),(220,'SBIN','2016-08-30',249.05,250.15,252.90,249.80,252.20,252.25,251.70,15323228.00,3856878080.00,99667,6747330,44.03),(221,'SBIN','2016-08-31',252.25,253.25,255.80,251.20,251.60,252.50,253.82,15601566.00,3959916800.00,138866,6348836,40.69),(222,'SBIN','2016-09-01',252.50,251.95,254.85,251.15,252.05,252.00,253.10,12175873.00,3081663744.00,87242,4841499,39.76),(223,'SBIN','2016-09-02',252.00,252.00,255.20,251.65,254.60,254.60,253.69,11380257.00,2887057920.00,96886,4548384,39.97),(224,'SBIN','2016-09-06',254.60,257.20,261.50,256.00,261.30,260.10,258.83,16620963.00,4302065664.00,159177,8417509,50.64),(225,'SBIN','2016-09-07',260.10,262.90,270.30,260.40,267.00,266.80,266.14,30862336.00,8213706240.00,164647,12072931,39.12),(226,'SBIN','2016-09-08',266.80,268.00,271.60,266.90,267.80,268.35,269.03,14339143.00,3857639680.00,79489,4554367,31.76),(227,'SBIN','2016-09-09',268.35,268.40,268.40,263.35,263.70,264.10,265.20,11455826.00,3038132224.00,65770,3558542,31.06),(228,'SBIN','2016-09-12',264.10,257.50,258.75,251.80,253.65,252.75,254.85,18989750.00,4839444992.00,115272,7725813,40.68),(229,'SBIN','2016-09-14',252.75,255.00,258.00,253.00,257.65,257.55,256.10,12754966.00,3266575872.00,77074,4507920,35.34),(230,'SBIN','2016-09-15',257.55,258.35,258.35,254.20,256.35,256.00,255.84,7783662.00,1991407360.00,56689,1839833,23.64),(231,'SBIN','2016-09-16',256.00,257.95,262.00,253.40,255.20,254.30,257.69,18013476.00,4641968128.00,109581,7860169,43.63),(232,'SBIN','2016-09-19',254.30,256.00,258.30,255.20,255.60,255.65,256.30,11433295.00,2930319104.00,66390,4088895,35.76),(233,'SBIN','2016-09-20',255.65,256.40,256.40,253.65,253.85,254.45,254.84,9914599.00,2526638336.00,74224,4170709,42.07),(234,'SBIN','2016-09-21',254.45,254.50,256.25,250.65,251.60,251.15,253.32,12817180.00,3246800384.00,94441,5709914,44.55),(235,'SBIN','2016-09-22',251.15,257.90,258.45,255.10,257.90,257.90,256.74,20797370.00,5339561984.00,116332,10720246,51.55),(236,'SBIN','2016-09-23',257.90,258.80,258.80,253.80,254.25,254.55,256.61,12730223.00,3266639872.00,72436,5580214,43.83),(237,'SBIN','2016-09-26',254.55,253.95,254.45,250.65,251.90,251.65,252.38,8800173.00,2221028608.00,60654,2685917,30.52),(238,'SBIN','2016-09-27',251.65,253.15,253.90,248.30,248.85,249.00,250.72,11345387.00,2844547584.00,68190,4760497,41.96),(239,'SBIN','2016-09-28',249.00,250.00,255.80,248.05,254.00,253.75,253.17,17277540.00,4374207488.00,82646,6685102,38.69),(240,'SBIN','2016-09-29',253.75,255.00,256.75,243.50,249.00,247.25,249.18,27870696.00,6944957952.00,120912,12868818,46.17),(241,'SBIN','2016-09-30',247.25,246.85,252.50,245.80,252.00,251.25,249.88,14826293.00,3704817920.00,105590,5136844,34.65),(242,'SBIN','2016-10-03',251.25,253.00,256.65,252.65,255.10,255.30,255.23,9314647.00,2377418240.00,74160,3403117,36.54),(243,'SBIN','2016-10-04',255.30,255.80,262.00,253.80,261.00,259.75,257.53,21532806.00,5545444864.00,117839,6172659,28.67),(244,'SBIN','2016-10-05',259.75,262.00,264.90,259.55,260.00,260.85,262.58,20868556.00,5479613952.00,133186,9608356,46.04),(245,'SBIN','2016-10-06',260.85,261.35,262.00,255.65,257.25,256.80,259.03,11081154.00,2870375936.00,70681,2388442,21.55),(246,'SBIN','2016-10-07',256.80,257.25,259.90,255.25,258.05,258.70,257.40,11934100.00,3071811328.00,72975,3440378,28.83),(247,'SBIN','2016-10-10',258.70,259.35,260.30,256.05,256.65,256.60,257.85,9399844.00,2423707904.00,71528,3297928,35.08),(248,'SBIN','2016-10-13',256.60,254.95,255.35,245.85,249.95,249.65,250.18,18050638.00,4515921920.00,127024,8947593,49.57),(249,'SBIN','2016-10-14',249.65,251.00,253.55,249.10,252.05,252.10,251.98,12133951.00,3057452544.00,79275,4664585,38.44),(250,'SBIN','2016-10-17',252.10,253.75,256.45,252.00,253.00,253.20,254.06,16865536.00,4284785152.00,89069,7544530,44.73),(251,'SBIN','2016-10-18',253.20,254.90,257.70,253.80,256.90,256.90,255.36,20218356.00,5162940416.00,167023,10419888,51.54),(252,'SBIN','2016-10-19',256.90,258.00,258.00,254.85,255.30,255.40,255.84,9546481.00,2442358272.00,53487,3509132,36.76),(253,'SBIN','2016-10-20',255.40,255.70,260.90,255.30,260.10,260.20,259.24,14179531.00,3675951104.00,100640,5105306,36.00),(254,'SBIN','2016-10-21',260.20,259.75,259.75,256.10,259.20,258.50,257.63,8833390.00,2275714560.00,51999,2578291,29.19),(255,'SBIN','2016-10-24',258.50,259.30,264.90,259.30,262.80,262.95,263.27,14483254.00,3813057536.00,112379,5944535,41.04),(256,'SBIN','2016-10-25',262.95,264.00,264.55,260.75,261.50,261.45,262.07,9079178.00,2379356416.00,60368,3539616,38.99),(257,'SBIN','2016-10-26',261.45,260.40,264.85,256.80,257.00,258.75,260.60,15020687.00,3914375424.00,94833,6029383,40.14),(258,'SBIN','2016-10-27',258.75,258.00,258.10,254.30,255.95,255.40,255.63,10938008.00,2796108288.00,61468,3784455,34.60),(259,'SBIN','2016-10-28',255.40,255.90,258.80,254.00,258.50,258.00,257.09,11430184.00,2938585088.00,64130,5088423,44.52),(260,'SBIN','2016-10-30',258.00,258.90,260.00,256.60,257.00,257.60,258.16,2107882.00,544166784.00,20579,749475,35.56),(261,'SBIN','2016-11-01',257.60,257.00,260.90,256.50,259.40,258.95,259.08,10000632.00,2591000064.00,73664,4054341,40.54),(262,'SBIN','2016-11-02',258.95,254.10,256.00,250.55,251.00,251.05,252.01,13716294.00,3456634624.00,90831,5847750,42.63),(263,'SBIN','2016-11-03',251.05,251.15,252.80,244.85,245.55,245.65,248.28,12902390.00,3203416576.00,84500,5002910,38.78),(264,'SBIN','2016-11-04',245.65,246.25,247.40,240.30,243.10,242.85,243.39,12657669.00,3080796928.00,92496,3573880,28.23),(265,'SBIN','2016-11-07',242.85,248.00,253.90,245.50,252.15,252.70,250.37,11224419.00,2810285568.00,83543,3311423,29.50),(266,'SBIN','2016-11-08',252.70,253.70,254.10,248.65,252.75,252.65,251.37,9367228.00,2354620160.00,74127,2522297,26.93),(267,'SBIN','2016-11-09',252.65,235.00,261.05,235.00,260.80,260.00,251.04,31761606.00,7973547008.00,185517,8434624,26.56),(268,'SBIN','2016-11-10',260.00,267.00,284.20,265.25,281.35,281.30,277.76,50227560.00,13951278080.00,316412,14611697,29.09),(269,'SBIN','2016-11-11',281.30,278.75,288.80,270.50,273.95,273.00,277.84,57937112.00,16097054720.00,312701,11466984,19.79),(270,'SBIN','2016-11-15',273.00,275.15,283.45,270.70,278.00,278.20,277.97,48658808.00,13525913600.00,246681,18007985,37.01),(271,'SBIN','2016-11-16',278.20,284.00,284.80,276.15,277.65,277.20,278.73,27532708.00,7674140160.00,158917,10888066,39.55),(272,'SBIN','2016-11-17',277.20,278.00,282.20,275.60,278.70,277.45,279.38,19500760.00,5448120320.00,134965,6431249,32.98),(273,'SBIN','2016-11-18',277.45,278.15,280.00,274.85,275.70,275.80,277.00,13389671.00,3708894464.00,92856,3127828,23.36),(274,'SBIN','2016-11-21',275.80,277.15,277.60,255.85,258.50,257.35,264.47,26002028.00,6876820480.00,161274,7295729,28.06),(275,'SBIN','2016-11-22',257.35,260.80,262.65,251.15,258.00,257.35,256.19,25631436.00,6566542848.00,154347,4480233,17.48),(276,'SBIN','2016-11-23',257.35,259.80,260.35,254.75,258.05,258.65,257.72,16190033.00,4172524544.00,116885,3815989,23.57),(277,'SBIN','2016-11-24',258.65,257.80,263.00,254.55,261.80,261.75,260.61,28927720.00,7538850304.00,141790,11174382,38.63),(278,'SBIN','2016-11-25',261.75,263.50,264.50,258.35,260.85,260.95,261.08,19303588.00,5039728128.00,142066,7194233,37.27),(279,'SBIN','2016-11-28',260.95,253.45,257.75,248.00,254.05,253.55,254.63,22315184.00,5682184192.00,184333,6951546,31.15),(280,'SBIN','2016-11-29',253.55,254.25,256.50,252.00,253.15,252.70,254.52,12656706.00,3221370624.00,109264,3910411,30.90),(281,'SBIN','2016-11-30',252.70,254.00,260.15,252.70,257.85,258.35,256.70,16501691.00,4235923200.00,131822,5197713,31.50),(282,'SBIN','2016-12-01',258.35,259.65,261.00,254.65,256.40,255.65,257.10,12986151.00,3338764032.00,79046,2873913,22.13),(283,'SBIN','2016-12-02',255.65,253.95,261.40,253.00,254.10,254.10,255.89,21139754.00,5409398784.00,136950,5031421,23.80),(284,'SBIN','2016-12-05',254.10,254.40,257.80,253.20,257.70,256.90,255.82,8406973.00,2150634240.00,68237,1597438,19.00),(285,'SBIN','2016-12-06',256.90,258.50,260.15,256.35,259.70,259.10,258.64,10048459.00,2598905600.00,72559,2212103,22.01),(286,'SBIN','2016-12-07',259.10,260.35,262.75,251.65,256.35,255.60,258.19,22193202.00,5730158592.00,141042,5391202,24.29),(287,'SBIN','2016-12-08',255.60,258.45,260.50,258.05,259.90,259.90,259.38,9047721.00,2346774528.00,66714,2098509,23.19),(288,'SBIN','2016-12-09',259.90,260.80,267.20,258.80,266.60,266.65,264.21,16004173.00,4228457216.00,103824,5188994,32.42),(289,'SBIN','2016-12-12',266.65,268.90,269.35,262.30,264.00,263.65,266.17,14296268.00,3805217536.00,99034,4000048,27.98),(290,'SBIN','2016-12-13',263.65,264.90,266.75,261.55,266.05,266.15,264.38,9084137.00,2401648384.00,67769,2460029,27.08),(291,'SBIN','2016-12-14',266.15,266.00,266.25,262.30,263.00,262.90,263.86,8672531.00,2288334336.00,81547,3157637,36.41),(292,'SBIN','2016-12-15',262.90,259.90,267.50,259.00,265.35,265.40,264.98,12274497.00,3252488704.00,83448,2382553,19.41),(293,'SBIN','2016-12-16',265.40,266.35,266.35,263.05,265.20,264.75,264.65,11017555.00,2915749376.00,83837,4944483,44.88),(294,'SBIN','2016-12-19',264.75,263.35,264.50,260.85,261.30,261.35,262.48,8371299.00,2197293824.00,57083,3315890,39.61),(295,'SBIN','2016-12-20',261.35,261.85,262.90,253.25,255.05,254.55,256.17,12765309.00,3270119168.00,78439,3594514,28.16),(296,'SBIN','2016-12-21',254.55,256.10,258.00,254.10,254.60,255.35,256.10,8778450.00,2248147456.00,66671,1805197,20.56),(297,'SBIN','2016-12-22',255.35,254.25,254.25,248.35,249.80,249.80,250.45,12981595.00,3251234304.00,103305,4672099,35.99),(298,'SBIN','2016-12-23',249.80,249.75,251.80,247.80,249.00,249.15,249.85,10557157.00,2637727488.00,82528,2644628,25.05),(299,'SBIN','2016-12-26',249.15,248.00,248.30,243.60,243.95,244.20,245.38,8592983.00,2108509312.00,70388,2745424,31.95),(300,'SBIN','2016-12-27',244.20,244.60,249.95,243.10,248.60,248.75,245.62,8756536.00,2150781184.00,79734,2124865,24.27),(301,'SBIN','2016-12-28',248.75,249.25,252.50,247.15,247.60,247.75,249.42,11747088.00,2929995264.00,83042,3329930,28.35),(302,'SBIN','2016-12-29',247.75,247.65,248.85,245.50,247.20,247.65,247.45,10658616.00,2637435136.00,69581,4540842,42.60),(303,'SBIN','2016-12-30',247.65,247.75,252.30,247.25,250.30,250.20,250.58,10538497.00,2640749824.00,91141,3293706,31.25),(304,'SBIN','2017-01-02',250.20,252.50,253.65,242.60,243.55,243.60,244.80,25988990.00,6362168320.00,164268,12078409,46.48),(305,'SBIN','2017-01-03',243.60,244.00,246.40,241.10,244.90,244.90,244.54,15963085.00,3903555840.00,112537,4370526,27.38),(306,'SBIN','2017-01-04',244.90,245.80,246.40,242.20,243.20,242.90,243.96,11225978.00,2738650624.00,91672,3632352,32.36),(307,'SBIN','2017-01-05',242.90,245.00,245.90,243.70,245.50,245.35,244.94,11970913.00,2932209408.00,88254,4511456,37.69),(308,'SBIN','2017-01-06',245.35,246.00,249.00,245.50,246.05,245.90,247.10,12354302.00,3052713984.00,75839,3393716,27.47),(309,'SBIN','2017-01-09',245.90,246.40,248.35,246.00,246.70,247.05,247.09,8329253.00,2058077312.00,96852,2615006,31.40),(310,'SBIN','2017-01-10',247.05,247.70,249.00,246.40,248.90,248.30,247.64,9352013.00,2315926784.00,61592,3888157,41.58),(311,'SBIN','2017-01-11',248.30,249.65,253.20,249.00,251.70,252.15,251.31,13415303.00,3371362560.00,88947,4496383,33.52),(312,'SBIN','2017-01-12',252.15,252.90,254.45,250.55,251.15,251.25,252.31,11282323.00,2846690816.00,79782,3565007,31.60),(313,'SBIN','2017-01-13',251.25,252.00,252.60,249.10,251.00,250.90,250.86,9333736.00,2341502976.00,61618,2870258,30.75),(314,'SBIN','2017-01-16',250.90,251.05,256.40,250.70,256.40,255.75,254.48,13234727.00,3367988736.00,103243,6268943,47.37),(315,'SBIN','2017-01-17',255.75,257.45,258.65,254.40,255.90,256.00,256.89,9480201.00,2435403264.00,78812,2606666,27.50),(316,'SBIN','2017-01-18',256.00,257.10,259.30,256.60,258.30,258.35,258.06,8048897.00,2077100544.00,67626,2556065,31.76),(317,'SBIN','2017-01-19',258.35,257.20,262.00,256.50,258.05,258.40,259.16,13029151.00,3376641280.00,90954,4631679,35.55),(318,'SBIN','2017-01-20',258.40,258.50,260.50,250.30,251.20,251.05,254.94,15341756.00,3911266816.00,130482,5848512,38.12),(319,'SBIN','2017-01-23',251.05,251.00,255.20,250.10,254.80,254.15,253.65,9339939.00,2369079552.00,68661,3291451,35.24),(320,'SBIN','2017-01-24',254.15,255.10,257.00,254.00,254.60,254.90,255.53,13540202.00,3459953664.00,67944,6203676,45.82),(321,'SBIN','2017-01-25',254.90,255.55,261.00,254.20,259.85,259.20,256.69,16343545.00,4195160320.00,100850,9274609,56.75),(322,'SBIN','2017-01-27',259.20,260.30,268.20,259.50,266.50,266.45,264.82,18039380.00,4777271296.00,141762,6528038,36.19),(323,'SBIN','2017-01-30',266.45,265.85,267.90,263.40,263.85,263.95,265.55,11884795.00,3155951360.00,81433,4484109,37.73),(324,'SBIN','2017-01-31',263.95,261.15,263.85,259.65,260.00,260.35,261.37,8899165.00,2325949696.00,58875,3298704,37.07),(325,'SBIN','2017-02-01',260.35,262.00,271.90,261.60,271.40,270.70,267.29,27253142.00,7284539392.00,162896,8648465,31.73),(326,'SBIN','2017-02-02',270.70,271.85,275.00,268.70,272.75,273.30,272.45,20139956.00,5487069696.00,115076,6787511,33.70),(327,'SBIN','2017-02-03',273.30,273.00,278.55,272.00,278.10,277.55,276.42,15366890.00,4247716096.00,96972,5823909,37.90),(328,'SBIN','2017-02-06',277.55,280.00,282.50,276.00,276.55,277.05,279.46,14725291.00,4115106304.00,86870,4007676,27.22),(329,'SBIN','2017-02-07',277.05,277.85,280.00,276.30,277.60,277.90,278.05,10981984.00,3053553664.00,71911,3158033,28.76),(330,'SBIN','2017-02-08',277.90,278.10,279.25,272.60,278.70,277.20,276.47,13622088.00,3766103552.00,80900,4651632,34.15),(331,'SBIN','2017-02-09',277.20,278.80,280.30,270.85,276.10,275.85,275.19,16080181.00,4425094656.00,103265,4702318,29.24),(332,'SBIN','2017-02-10',275.85,278.75,282.80,275.00,275.20,276.35,279.51,37580488.00,10504276992.00,229689,7610992,20.25),(333,'SBIN','2017-02-13',276.35,277.80,278.25,270.20,271.50,271.65,272.68,19853044.00,5413464576.00,131249,7859215,39.59),(334,'SBIN','2017-02-14',271.65,272.00,273.00,268.10,269.60,270.20,270.61,13306738.00,3600976384.00,80457,4723961,35.50),(335,'SBIN','2017-02-15',270.20,270.95,272.50,267.05,269.30,268.95,269.35,12201568.00,3286551296.00,84751,4131482,33.86),(336,'SBIN','2017-02-16',268.95,277.00,277.00,269.65,270.40,270.50,271.89,21794688.00,5925860352.00,128472,6441114,29.55),(337,'SBIN','2017-02-17',270.50,271.15,273.65,267.70,269.50,269.35,269.75,17830528.00,4809736704.00,124751,7500497,42.07),(338,'SBIN','2017-02-20',269.35,269.90,271.55,268.00,269.50,269.65,269.51,9229363.00,2487437824.00,57805,3475091,37.65),(339,'SBIN','2017-02-21',269.65,270.00,271.50,268.65,270.75,270.70,270.13,7754157.00,2094652544.00,80298,2664456,34.36),(340,'SBIN','2017-02-22',270.70,271.90,274.70,269.50,271.70,272.30,272.59,12617613.00,3439486464.00,112129,4806179,38.09),(341,'SBIN','2017-02-23',272.30,271.70,273.00,269.60,270.50,270.45,271.29,13146194.00,3566482688.00,84162,7243813,55.10),(342,'SBIN','2017-02-27',270.45,270.80,271.45,267.60,268.20,268.25,269.02,9645350.00,2594791680.00,68463,4606438,47.76),(343,'SBIN','2017-02-28',268.25,268.90,271.25,268.00,269.00,269.20,269.49,7941592.00,2140204800.00,65573,2816662,35.47),(344,'SBIN','2017-03-01',269.20,270.00,273.30,269.80,271.70,271.75,271.94,7656892.00,2082232064.00,58629,2004506,26.18),(345,'SBIN','2017-03-02',271.75,273.00,274.70,266.50,267.20,267.30,270.99,14220808.00,3853749504.00,80696,4596797,32.32),(346,'SBIN','2017-03-03',267.30,266.25,268.90,264.25,265.55,265.05,265.78,10120034.00,2689695232.00,75478,3907290,38.61),(347,'SBIN','2017-03-06',265.05,266.60,270.35,266.35,270.20,269.85,268.37,9515073.00,2553575424.00,63033,3982426,41.85),(348,'SBIN','2017-03-07',269.85,270.80,270.90,266.40,267.70,267.80,267.78,11599142.00,3106065920.00,65023,6347327,54.72),(349,'SBIN','2017-03-08',267.80,267.80,270.30,266.00,270.05,269.90,268.62,9122987.00,2450644992.00,65561,3081623,33.78),(350,'SBIN','2017-03-09',269.90,269.00,273.90,268.40,273.15,273.25,272.15,15594429.00,4244086528.00,95804,7576329,48.58),(351,'SBIN','2017-03-10',273.25,274.50,275.55,269.50,271.90,272.05,272.67,9557026.00,2605920512.00,77178,3246642,33.97),(352,'SBIN','2017-03-14',272.05,278.40,278.40,273.80,274.75,274.65,275.43,15734886.00,4333927936.00,108786,7747107,49.24),(353,'SBIN','2017-03-15',274.65,272.65,280.50,272.65,276.55,277.35,277.95,20055974.00,5574549504.00,127137,9841167,49.07),(354,'SBIN','2017-03-16',277.35,278.00,280.20,276.05,279.05,279.30,278.38,18005184.00,5012227072.00,139878,8827321,49.03),(355,'SBIN','2017-03-17',279.30,279.45,279.50,273.50,274.00,274.15,275.10,14265642.00,3924494848.00,95520,7240757,50.76),(356,'SBIN','2017-03-20',274.15,274.75,274.75,271.80,273.90,273.90,273.41,9678185.00,2646065920.00,71526,4612235,47.66),(357,'SBIN','2017-03-21',273.90,274.40,277.05,270.15,272.75,272.35,273.52,11898233.00,3254395904.00,72969,4944113,41.55),(358,'SBIN','2017-03-22',272.35,270.30,271.00,266.80,267.75,267.50,268.74,9887203.00,2657109760.00,97564,4670186,47.23),(359,'SBIN','2017-03-23',267.50,269.00,269.40,266.70,268.65,268.50,268.14,7998170.00,2144647552.00,77028,4061076,50.78),(360,'SBIN','2017-03-24',268.50,269.50,278.95,268.65,275.95,276.50,275.33,20133468.00,5543261184.00,135209,8243224,40.94),(361,'SBIN','2017-03-27',276.50,276.00,280.80,275.20,278.90,279.45,278.73,15966114.00,4450236928.00,103411,5464685,34.23),(362,'SBIN','2017-03-28',279.45,280.65,282.90,278.50,282.20,282.10,280.87,18673372.00,5244849152.00,89603,10584347,56.68),(363,'SBIN','2017-03-29',282.10,283.15,289.90,283.15,288.70,288.45,287.10,31008408.00,8902363136.00,160418,16769893,54.08),(364,'SBIN','2017-03-30',288.45,289.00,293.75,288.85,291.40,291.05,291.33,19683170.00,5734340096.00,111949,7306917,37.12),(365,'SBIN','2017-03-31',291.05,292.00,295.00,288.50,293.30,293.40,292.77,20185268.00,5909721088.00,121335,6436380,31.89),(366,'SBIN','2017-04-03',293.40,294.80,295.70,292.20,293.40,293.15,293.83,10509610.00,3088047360.00,63796,3224137,30.68),(367,'SBIN','2017-04-05',293.15,293.30,298.75,289.65,297.00,297.35,294.71,21936648.00,6465018368.00,143045,9434760,43.01),(368,'SBIN','2017-04-06',297.35,295.45,297.55,291.45,292.25,292.85,294.35,18413112.00,5419869696.00,90051,6325489,34.35),(369,'SBIN','2017-04-07',292.85,291.70,294.80,287.65,288.30,289.45,292.04,10765502.00,3143916032.00,67483,3287133,30.53),(370,'SBIN','2017-04-10',289.45,289.80,290.35,286.55,290.00,289.35,288.81,10307875.00,2977057536.00,95079,3192927,30.98),(371,'SBIN','2017-04-11',289.35,289.30,295.15,288.80,294.30,294.50,292.69,11682024.00,3419233536.00,93318,4281388,36.65),(372,'SBIN','2017-04-12',294.50,294.00,295.45,289.10,290.25,290.15,291.41,13251421.00,3861572864.00,88924,4725911,35.66),(373,'SBIN','2017-04-13',290.15,290.25,293.10,290.00,292.00,291.55,291.41,9944020.00,2897768960.00,73697,3191327,32.09),(374,'SBIN','2017-04-17',291.55,291.10,292.75,288.50,290.20,289.90,289.82,8146800.00,2361107200.00,70366,2782552,34.16),(375,'SBIN','2017-04-18',289.90,291.05,296.90,288.40,291.55,164.70,293.26,13457050.00,3946372608.00,112786,3933986,29.23),(376,'SBIN','2017-04-19',290.30,291.55,291.75,282.90,284.90,164.95,286.36,18149996.00,5197413888.00,106330,8414421,46.36),(377,'SBIN','2017-04-20',284.05,283.90,286.90,282.20,284.85,158.50,284.50,14514929.00,4129487360.00,134919,5768064,39.74),(378,'SBIN','2017-04-21',284.80,287.00,287.00,279.25,282.40,156.30,282.73,12042308.00,3404704768.00,90196,3890947,32.31),(379,'SBIN','2017-04-24',282.20,283.25,287.85,280.90,286.05,151.80,284.64,10077853.00,2868591360.00,89547,3206400,31.82),(380,'SBIN','2017-04-25',286.05,287.50,288.80,285.00,285.90,155.90,286.69,11531902.00,3306125568.00,146257,5021274,43.54),(381,'SBIN','2017-04-26',286.05,287.10,289.50,283.35,285.75,158.75,287.17,13836891.00,3973502464.00,124870,5730697,41.42),(382,'SBIN','2017-04-27',286.45,286.45,287.95,281.05,282.90,162.05,283.58,22622372.00,6415248384.00,119362,13404034,59.25),(383,'SBIN','2017-04-28',282.05,283.00,290.75,282.50,289.40,181.15,286.80,14152004.00,4058772992.00,86994,4940261,34.91),(384,'SBIN','2017-05-02',289.75,290.25,292.50,287.10,288.35,182.75,289.61,9754789.00,2825042432.00,79720,3226892,33.08),(385,'SBIN','2017-05-03',288.30,289.40,293.20,285.80,289.40,188.40,289.52,13950914.00,4039031552.00,86140,4756276,34.09),(386,'SBIN','2017-05-04',289.80,294.00,300.00,293.10,299.80,183.35,296.49,24534924.00,7274385408.00,141660,7644530,31.16),(387,'SBIN','2017-05-05',299.05,301.00,304.90,292.15,295.95,183.40,299.21,34756332.00,10399339520.00,192131,9028419,25.98),(388,'SBIN','2017-05-08',296.00,296.10,300.75,293.90,298.80,180.50,298.68,11560550.00,3452853248.00,87129,3497415,30.25),(389,'SBIN','2017-05-09',299.40,300.90,300.90,295.25,296.40,180.10,297.18,7843574.00,2330960384.00,52271,1619122,20.64),(390,'SBIN','2017-05-10',296.50,297.00,298.15,293.00,294.85,181.75,295.51,8699405.00,2570749696.00,54706,2414488,27.75),(391,'SBIN','2017-05-11',294.45,295.90,299.40,294.45,297.70,185.30,297.34,11934889.00,3548713728.00,75103,5119985,42.90),(392,'SBIN','2017-05-12',298.10,300.00,302.60,296.00,297.85,185.20,299.11,13376269.00,4000935168.00,80897,4186552,31.30),(393,'SBIN','2017-05-15',297.90,298.40,302.00,297.50,300.85,186.35,300.31,10383539.00,3118315008.00,85232,4253034,40.96),(394,'SBIN','2017-05-16',301.40,302.00,308.40,299.35,308.05,191.25,304.43,17533440.00,5337697280.00,130379,6038637,34.44),(395,'SBIN','2017-05-17',307.50,308.00,308.80,305.50,307.05,196.80,307.22,14120513.00,4338137600.00,83419,5555959,39.35),(396,'SBIN','2017-05-18',307.65,304.85,307.90,302.00,302.00,197.50,304.49,15471393.00,4710915584.00,109109,5470333,35.36),(397,'SBIN','2017-05-19',302.95,304.45,315.30,302.00,308.95,196.60,308.83,55250968.00,17062912000.00,339663,10945486,19.81),(398,'SBIN','2017-05-22',308.00,308.95,309.40,293.20,294.40,188.30,298.80,35771220.00,10688311296.00,239823,13476242,37.67),(399,'SBIN','2017-05-23',294.30,295.00,295.90,287.25,288.85,189.50,290.25,19846852.00,5760600576.00,133995,5684339,28.64),(400,'SBIN','2017-05-24',288.85,290.05,290.45,281.65,283.25,197.55,285.51,16435958.00,4692594688.00,120004,4768521,29.01),(401,'SBIN','2017-05-25',283.15,284.15,291.35,283.55,290.00,194.25,287.27,15018467.00,4314318336.00,112707,5507686,36.67),(402,'SBIN','2017-05-26',290.10,290.50,291.00,285.30,289.00,195.65,287.71,12304394.00,3540130816.00,139676,4485862,36.46),(403,'SBIN','2017-05-29',288.45,288.90,290.85,283.30,283.60,194.70,286.97,10619968.00,3047571456.00,86060,3905775,36.78),(404,'SBIN','2017-05-30',288.45,288.90,290.85,283.30,283.60,193.30,286.97,10620000.00,3047569920.00,86060,3905775,36.78),(405,'SBIN','2017-05-31',288.45,288.90,290.85,283.30,283.60,192.10,286.97,10620000.00,3047569920.00,86060,3905775,36.78);
/*!40000 ALTER TABLE `equity_data_has_pattern` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `equity_data_has_pattern_rally_top`
--

DROP TABLE IF EXISTS `equity_data_has_pattern_rally_top`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `equity_data_has_pattern_rally_top` (
  `ROW_ID` int(5) NOT NULL AUTO_INCREMENT,
  `SYMBOL` varchar(45) NOT NULL,
  `CURR_DATE` date NOT NULL,
  `PREV_CLOSE` float(10,2) DEFAULT NULL,
  `OPEN_PRICE` float(10,2) DEFAULT NULL,
  `HIGH_PRICE` float(10,2) DEFAULT NULL,
  `LOW_PRICE` float(10,2) DEFAULT NULL,
  `LAST_PRICE` float(10,2) DEFAULT NULL,
  `CLOSE_PRICE` float(10,2) DEFAULT NULL,
  `AVERAGE_PRICE` float(10,2) DEFAULT NULL,
  `TOTAL_TRADED_QUANTITY` float(20,2) DEFAULT NULL,
  `TURNOVER` float(20,2) DEFAULT NULL,
  `NO_OF_TRADES` int(11) DEFAULT NULL,
  `DELIVERABLE_QTY` int(11) DEFAULT NULL,
  `PERCENT_DELIVERABLE_QTY` float(10,2) DEFAULT NULL,
  PRIMARY KEY (`ROW_ID`)
) ENGINE=InnoDB AUTO_INCREMENT=446 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `equity_data_has_pattern_rally_top`
--

LOCK TABLES `equity_data_has_pattern_rally_top` WRITE;
/*!40000 ALTER TABLE `equity_data_has_pattern_rally_top` DISABLE KEYS */;
INSERT INTO `equity_data_has_pattern_rally_top` VALUES (116,'SBIN','2016-03-30',189.50,192.25,198.30,190.50,197.05,197.55,194.81,20709408.00,4034427648.00,126461,4691725,22.66),(132,'SBIN','2016-04-26',197.05,195.95,201.40,194.55,200.80,200.95,198.76,21809452.00,4334812160.00,126638,4502133,20.64),(188,'SBIN','2016-07-14',227.70,227.00,232.85,226.00,231.75,232.00,230.43,21208020.00,4886952448.00,124475,5697439,26.86),(213,'SBIN','2016-08-19',248.40,255.00,260.00,253.50,258.50,258.50,256.76,39822528.00,10224911360.00,209689,11933585,29.97),(226,'SBIN','2016-09-08',266.80,268.00,271.60,266.90,267.80,268.35,269.03,14339143.00,3857639680.00,79489,4554367,31.76),(268,'SBIN','2016-11-10',260.00,267.00,284.20,265.25,281.35,281.30,277.76,50227560.00,13951278080.00,316412,14611697,29.09),(329,'SBIN','2017-02-07',277.05,277.85,280.00,276.30,277.60,277.90,278.05,10981984.00,3053553664.00,71911,3158033,28.76),(354,'SBIN','2017-03-16',277.35,278.00,280.20,276.05,279.05,279.30,278.38,18005184.00,5012227072.00,139878,8827321,49.03),(367,'SBIN','2017-04-05',293.15,293.30,298.75,289.65,297.00,297.35,294.71,21936648.00,6465018368.00,143045,9434760,43.01);
/*!40000 ALTER TABLE `equity_data_has_pattern_rally_top` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `equity_data_has_pattern_top_temp`
--

DROP TABLE IF EXISTS `equity_data_has_pattern_top_temp`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `equity_data_has_pattern_top_temp` (
  `ROW_ID` int(5) NOT NULL AUTO_INCREMENT,
  `SYMBOL` varchar(45) NOT NULL,
  `CURR_DATE` date NOT NULL,
  `PREV_CLOSE` float(10,2) DEFAULT NULL,
  `OPEN_PRICE` float(10,2) DEFAULT NULL,
  `HIGH_PRICE` float(10,2) DEFAULT NULL,
  `LOW_PRICE` float(10,2) DEFAULT NULL,
  `LAST_PRICE` float(10,2) DEFAULT NULL,
  `CLOSE_PRICE` float(10,2) DEFAULT NULL,
  `AVERAGE_PRICE` float(10,2) DEFAULT NULL,
  `TOTAL_TRADED_QUANTITY` float(20,2) DEFAULT NULL,
  `TURNOVER` float(20,2) DEFAULT NULL,
  `NO_OF_TRADES` int(11) DEFAULT NULL,
  `DELIVERABLE_QTY` int(11) DEFAULT NULL,
  `PERCENT_DELIVERABLE_QTY` float(10,2) DEFAULT NULL,
  PRIMARY KEY (`ROW_ID`)
) ENGINE=InnoDB AUTO_INCREMENT=457 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `equity_data_has_pattern_top_temp`
--

LOCK TABLES `equity_data_has_pattern_top_temp` WRITE;
/*!40000 ALTER TABLE `equity_data_has_pattern_top_temp` DISABLE KEYS */;
INSERT INTO `equity_data_has_pattern_top_temp` VALUES (2,'SBIN','2015-10-12',243.45,244.10,245.65,241.30,244.15,244.55,244.27,7566962.00,1848345472.00,57702,2819307,37.26),(5,'SBIN','2015-10-15',244.25,246.00,249.90,245.50,249.05,248.95,248.42,11582401.00,2877244416.00,86325,3894772,33.63),(6,'SBIN','2015-10-16',248.95,249.85,257.15,248.35,256.80,254.85,251.84,11738832.00,2956324864.00,84407,3725598,31.74),(110,'SBIN','2016-03-18',186.35,186.85,192.00,186.00,191.50,191.25,189.06,21144216.00,3997511168.00,134926,6611156,31.27),(111,'SBIN','2016-03-21',191.25,193.00,197.30,193.00,197.05,196.80,195.30,20678068.00,4038513920.00,143523,6513731,31.50),(112,'SBIN','2016-03-22',196.80,196.80,198.25,194.50,197.90,197.50,196.38,16728809.00,3285173248.00,116859,3908068,23.36),(116,'SBIN','2016-03-30',189.50,192.25,198.30,190.50,197.05,197.55,194.81,20709408.00,4034427648.00,126461,4691725,22.66),(130,'SBIN','2016-04-22',194.35,193.60,201.50,191.55,200.25,200.15,198.29,34049764.00,6751869952.00,194929,9141444,26.85),(132,'SBIN','2016-04-26',197.05,195.95,201.40,194.55,200.80,200.95,198.76,21809452.00,4334812160.00,126638,4502133,20.64),(157,'SBIN','2016-05-31',198.85,198.80,205.70,196.20,205.30,204.95,201.54,39457648.00,7952388608.00,227995,11774756,29.84),(162,'SBIN','2016-06-07',198.90,200.45,211.15,200.15,210.15,210.15,205.82,66063192.00,13597283328.00,363240,18623978,28.19),(163,'SBIN','2016-06-08',210.15,210.15,211.90,207.55,209.90,210.70,210.28,35163092.00,7394208256.00,191274,10519149,29.92),(168,'SBIN','2016-06-15',207.70,209.75,217.55,208.55,215.25,216.05,213.78,48362744.00,10338917376.00,262445,8804444,18.21),(174,'SBIN','2016-06-23',212.90,213.00,218.00,212.75,217.80,217.55,215.84,20666648.00,4460588032.00,125144,6492054,31.41),(179,'SBIN','2016-06-30',217.20,220.00,221.90,217.90,219.30,218.80,219.92,30600996.00,6729755136.00,134433,8573520,28.02),(180,'SBIN','2016-07-01',218.80,220.80,221.00,218.90,219.20,219.60,219.93,15346865.00,3375271168.00,76742,4010619,26.13),(181,'SBIN','2016-07-04',219.60,222.35,224.35,222.00,222.90,223.00,223.16,16534518.00,3689841920.00,92943,3792823,22.94),(182,'SBIN','2016-07-05',223.00,223.25,225.15,221.55,223.00,223.50,223.72,15357018.00,3435729152.00,102896,4498810,29.29),(185,'SBIN','2016-07-11',218.30,223.60,225.45,222.00,224.50,224.70,223.59,15831791.00,3539855616.00,82208,5654844,35.72),(186,'SBIN','2016-07-12',224.70,225.00,227.20,224.15,226.75,226.70,226.10,19374180.00,4380494848.00,96849,7895882,40.75),(187,'SBIN','2016-07-13',226.70,227.00,228.50,223.95,226.75,227.70,226.83,18377332.00,4168619264.00,102415,5491345,29.88),(188,'SBIN','2016-07-14',227.70,227.00,232.85,226.00,231.75,232.00,230.43,21208020.00,4886952448.00,124475,5697439,26.86),(204,'SBIN','2016-08-05',225.65,227.35,233.90,226.90,231.85,232.75,232.09,21264296.00,4935293440.00,113047,8017919,37.71),(205,'SBIN','2016-08-08',232.75,233.95,235.90,231.70,232.65,233.25,233.54,16972828.00,3963838720.00,79004,5892060,34.71),(206,'SBIN','2016-08-09',233.25,234.25,238.00,232.65,235.50,235.15,234.92,19854184.00,4664086528.00,109330,5586660,28.14),(209,'SBIN','2016-08-12',227.15,227.00,247.95,224.40,243.60,243.30,240.56,86616472.00,20836726784.00,458828,24769437,28.60),(210,'SBIN','2016-08-16',243.30,245.25,247.90,242.65,246.20,246.75,245.15,27709872.00,6792957440.00,135110,6723968,24.27),(212,'SBIN','2016-08-18',246.25,246.90,250.40,246.55,248.20,248.40,248.77,14314950.00,3561094144.00,82107,3773825,26.36),(213,'SBIN','2016-08-19',248.40,255.00,260.00,253.50,258.50,258.50,256.76,39822528.00,10224911360.00,209689,11933585,29.97),(224,'SBIN','2016-09-06',254.60,257.20,261.50,256.00,261.30,260.10,258.83,16620963.00,4302065664.00,159177,8417509,50.64),(225,'SBIN','2016-09-07',260.10,262.90,270.30,260.40,267.00,266.80,266.14,30862336.00,8213706240.00,164647,12072931,39.12),(226,'SBIN','2016-09-08',266.80,268.00,271.60,266.90,267.80,268.35,269.03,14339143.00,3857639680.00,79489,4554367,31.76),(268,'SBIN','2016-11-10',260.00,267.00,284.20,265.25,281.35,281.30,277.76,50227560.00,13951278080.00,316412,14611697,29.09),(325,'SBIN','2017-02-01',260.35,262.00,271.90,261.60,271.40,270.70,267.29,27253142.00,7284539392.00,162896,8648465,31.73),(326,'SBIN','2017-02-02',270.70,271.85,275.00,268.70,272.75,273.30,272.45,20139956.00,5487069696.00,115076,6787511,33.70),(327,'SBIN','2017-02-03',273.30,273.00,278.55,272.00,278.10,277.55,276.42,15366890.00,4247716096.00,96972,5823909,37.90),(329,'SBIN','2017-02-07',277.05,277.85,280.00,276.30,277.60,277.90,278.05,10981984.00,3053553664.00,71911,3158033,28.76),(354,'SBIN','2017-03-16',277.35,278.00,280.20,276.05,279.05,279.30,278.38,18005184.00,5012227072.00,139878,8827321,49.03),(361,'SBIN','2017-03-27',276.50,276.00,280.80,275.20,278.90,279.45,278.73,15966114.00,4450236928.00,103411,5464685,34.23),(362,'SBIN','2017-03-28',279.45,280.65,282.90,278.50,282.20,282.10,280.87,18673372.00,5244849152.00,89603,10584347,56.68),(363,'SBIN','2017-03-29',282.10,283.15,289.90,283.15,288.70,288.45,287.10,31008408.00,8902363136.00,160418,16769893,54.08),(364,'SBIN','2017-03-30',288.45,289.00,293.75,288.85,291.40,291.05,291.33,19683170.00,5734340096.00,111949,7306917,37.12),(365,'SBIN','2017-03-31',291.05,292.00,295.00,288.50,293.30,293.40,292.77,20185268.00,5909721088.00,121335,6436380,31.89),(367,'SBIN','2017-04-05',293.15,293.30,298.75,289.65,297.00,297.35,294.71,21936648.00,6465018368.00,143045,9434760,43.01);
/*!40000 ALTER TABLE `equity_data_has_pattern_top_temp` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `equity_data_has_second_shoulder_top`
--

DROP TABLE IF EXISTS `equity_data_has_second_shoulder_top`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `equity_data_has_second_shoulder_top` (
  `head_row_id` int(5) NOT NULL,
  `ROW_ID` int(5) NOT NULL,
  `SYMBOL` varchar(45) NOT NULL,
  `CURR_DATE` date NOT NULL,
  `PREV_CLOSE` float DEFAULT NULL,
  `OPEN_PRICE` float DEFAULT NULL,
  `HIGH_PRICE` float DEFAULT NULL,
  `LOW_PRICE` float DEFAULT NULL,
  `LAST_PRICE` float DEFAULT NULL,
  `CLOSE_PRICE` float DEFAULT NULL,
  `AVERAGE_PRICE` float DEFAULT NULL,
  `TOTAL_TRADED_QUANTITY` float DEFAULT NULL,
  `TURNOVER` float DEFAULT NULL,
  `NO_OF_TRADES` int(11) DEFAULT NULL,
  `DELIVERABLE_QTY` int(11) DEFAULT NULL,
  `PERCENT_DELIVERABLE_QTY` float DEFAULT NULL,
  PRIMARY KEY (`ROW_ID`,`head_row_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `equity_data_has_second_shoulder_top`
--

LOCK TABLES `equity_data_has_second_shoulder_top` WRITE;
/*!40000 ALTER TABLE `equity_data_has_second_shoulder_top` DISABLE KEYS */;
/*!40000 ALTER TABLE `equity_data_has_second_shoulder_top` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `has_event_log`
--

DROP TABLE IF EXISTS `has_event_log`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `has_event_log` (
  `has_event_log_id` int(11) NOT NULL AUTO_INCREMENT,
  `eval_run_id` int(11) DEFAULT NULL,
  `has_event_short_desc` varchar(45) DEFAULT NULL,
  `has_event_desc` varchar(200) NOT NULL,
  PRIMARY KEY (`has_event_log_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `has_event_log`
--

LOCK TABLES `has_event_log` WRITE;
/*!40000 ALTER TABLE `has_event_log` DISABLE KEYS */;
/*!40000 ALTER TABLE `has_event_log` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `has_first_shoulder_data`
--

DROP TABLE IF EXISTS `has_first_shoulder_data`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `has_first_shoulder_data` (
  `first_shoulder_top_row_id` int(5) NOT NULL,
  `first_shoulder_top_date` date NOT NULL,
  `first_shoulder_top_close_price` float NOT NULL,
  `first_shoulder_low_row_id` int(5) DEFAULT NULL,
  `first_shoulder_low_date` date DEFAULT NULL,
  `first_shoulder_low_close_price` float DEFAULT NULL,
  `head_row_id` int(5) NOT NULL,
  `head_date` date NOT NULL,
  `head_close_price` float NOT NULL,
  `head_low_row_id` int(5) DEFAULT NULL,
  `head_low_date` date DEFAULT NULL,
  `head_low_close_price` float DEFAULT NULL,
  PRIMARY KEY (`first_shoulder_top_row_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `has_first_shoulder_data`
--

LOCK TABLES `has_first_shoulder_data` WRITE;
/*!40000 ALTER TABLE `has_first_shoulder_data` DISABLE KEYS */;
/*!40000 ALTER TABLE `has_first_shoulder_data` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `has_neckline_points`
--

DROP TABLE IF EXISTS `has_neckline_points`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `has_neckline_points` (
  `has_id` int(11) NOT NULL,
  `row_id` int(11) NOT NULL,
  `curr_date` date DEFAULT NULL,
  `price_value` float(10,2) DEFAULT NULL,
  PRIMARY KEY (`has_id`,`row_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `has_neckline_points`
--

LOCK TABLES `has_neckline_points` WRITE;
/*!40000 ALTER TABLE `has_neckline_points` DISABLE KEYS */;
/*!40000 ALTER TABLE `has_neckline_points` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `has_pattern_rules`
--

DROP TABLE IF EXISTS `has_pattern_rules`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `has_pattern_rules` (
  `rule_id` int(11) NOT NULL,
  `rule_name` varchar(45) DEFAULT NULL,
  `rule_value` float NOT NULL,
  `rule_desc` varchar(500) DEFAULT NULL,
  PRIMARY KEY (`rule_id`),
  UNIQUE KEY `rule_name_UNIQUE` (`rule_name`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `has_pattern_rules`
--

LOCK TABLES `has_pattern_rules` WRITE;
/*!40000 ALTER TABLE `has_pattern_rules` DISABLE KEYS */;
INSERT INTO `has_pattern_rules` VALUES (1,'HEAD_DURATION_PERCENTAGE_OF_RALLY',5,'TIME TAKEN TO MAKE LOW AFTER IDENTIFYING HEAD PEAK. ALSO SAME TIME IS USED TO VERIFY THAT THIS IS LOW POINT FROM FUTURE VALUES'),(2,'MAX_NECKLINE_SLOPE_ABSOLUTE_VALUE',0.3,'MAX VALUE FOR SLOPE OF NECKLINE IN ABSOLUTE TERMS');
/*!40000 ALTER TABLE `has_pattern_rules` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `has_pattern_type`
--

DROP TABLE IF EXISTS `has_pattern_type`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `has_pattern_type` (
  `type_id` int(11) NOT NULL,
  `type_name` varchar(45) DEFAULT NULL,
  `type_desc` varchar(250) DEFAULT NULL,
  PRIMARY KEY (`type_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `has_pattern_type`
--

LOCK TABLES `has_pattern_type` WRITE;
/*!40000 ALTER TABLE `has_pattern_type` DISABLE KEYS */;
INSERT INTO `has_pattern_type` VALUES (1,'SHORT_CUT',NULL),(2,'FULL_LOW',NULL);
/*!40000 ALTER TABLE `has_pattern_type` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `identified_has_data`
--

DROP TABLE IF EXISTS `identified_has_data`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `identified_has_data` (
  `has_id` int(5) NOT NULL AUTO_INCREMENT,
  `symbol` varchar(45) NOT NULL,
  `first_shoulder_top_row_id` int(5) NOT NULL,
  `first_shoulder_top_date` date DEFAULT NULL,
  `first_shoulder_top_close_price` float DEFAULT NULL,
  `first_shoulder_low_row_id` int(5) DEFAULT NULL,
  `first_shoulder_low_date` date DEFAULT NULL,
  `first_shoulder_low_close_price` float DEFAULT NULL,
  `head_row_id` int(5) DEFAULT NULL,
  `head_date` date DEFAULT NULL,
  `head_close_price` float DEFAULT NULL,
  `head_low_row_id` int(5) DEFAULT NULL,
  `head_low_date` date DEFAULT NULL,
  `head_low_close_price` float DEFAULT NULL,
  `second_shoulder_top_row_id` int(5) DEFAULT NULL,
  `second_shoulder_top_date` date DEFAULT NULL,
  `second_shoulder_top_close_price` float DEFAULT NULL,
  `second_shoulder_low_row_id` int(5) DEFAULT NULL,
  `second_shoulder_low_date` date DEFAULT NULL,
  `second_shoulder_low_close_price` float DEFAULT NULL,
  PRIMARY KEY (`has_id`,`symbol`,`first_shoulder_top_row_id`)
) ENGINE=InnoDB AUTO_INCREMENT=136 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `identified_has_data`
--

LOCK TABLES `identified_has_data` WRITE;
/*!40000 ALTER TABLE `identified_has_data` DISABLE KEYS */;
/*!40000 ALTER TABLE `identified_has_data` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `identified_has_neckline_data`
--

DROP TABLE IF EXISTS `identified_has_neckline_data`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `identified_has_neckline_data` (
  `has_id` int(5) NOT NULL AUTO_INCREMENT,
  `first_shoulder_low_row_id` int(5) DEFAULT NULL,
  `first_shoulder_low_date` date DEFAULT NULL,
  `first_shoulder_low_close_price` float DEFAULT NULL,
  `neckline_slope_value` float DEFAULT NULL,
  PRIMARY KEY (`has_id`)
) ENGINE=InnoDB AUTO_INCREMENT=136 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `identified_has_neckline_data`
--

LOCK TABLES `identified_has_neckline_data` WRITE;
/*!40000 ALTER TABLE `identified_has_neckline_data` DISABLE KEYS */;
/*!40000 ALTER TABLE `identified_has_neckline_data` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `identified_has_pattern_type`
--

DROP TABLE IF EXISTS `identified_has_pattern_type`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `identified_has_pattern_type` (
  `has_id` int(11) NOT NULL,
  `identified_pattern_type_id` int(11) DEFAULT NULL,
  PRIMARY KEY (`has_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `identified_has_pattern_type`
--

LOCK TABLES `identified_has_pattern_type` WRITE;
/*!40000 ALTER TABLE `identified_has_pattern_type` DISABLE KEYS */;
INSERT INTO `identified_has_pattern_type` VALUES (135,2);
/*!40000 ALTER TABLE `identified_has_pattern_type` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `market_sessions`
--

DROP TABLE IF EXISTS `market_sessions`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `market_sessions` (
  `row_id` int(5) NOT NULL,
  `session_date` date DEFAULT NULL,
  PRIMARY KEY (`row_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `market_sessions`
--

LOCK TABLES `market_sessions` WRITE;
/*!40000 ALTER TABLE `market_sessions` DISABLE KEYS */;
INSERT INTO `market_sessions` VALUES (1,'2015-10-09'),(2,'2015-10-12'),(3,'2015-10-13'),(4,'2015-10-14'),(5,'2015-10-15'),(6,'2015-10-16'),(7,'2015-10-19'),(8,'2015-10-20'),(9,'2015-10-21'),(10,'2015-10-23'),(11,'2015-10-26'),(12,'2015-10-27'),(13,'2015-10-28'),(14,'2015-10-29'),(15,'2015-10-30'),(16,'2015-11-02'),(17,'2015-11-03'),(18,'2015-11-04'),(19,'2015-11-05'),(20,'2015-11-06'),(21,'2015-11-09'),(22,'2015-11-10'),(23,'2015-11-11'),(24,'2015-11-13'),(25,'2015-11-16'),(26,'2015-11-17'),(27,'2015-11-18'),(28,'2015-11-19'),(29,'2015-11-20'),(30,'2015-11-23'),(31,'2015-11-24'),(32,'2015-11-26'),(33,'2015-11-27'),(34,'2015-11-30'),(35,'2015-12-01'),(36,'2015-12-02'),(37,'2015-12-03'),(38,'2015-12-04'),(39,'2015-12-07'),(40,'2015-12-08'),(41,'2015-12-09'),(42,'2015-12-10'),(43,'2015-12-11'),(44,'2015-12-14'),(45,'2015-12-15'),(46,'2015-12-16'),(47,'2015-12-17'),(48,'2015-12-18'),(49,'2015-12-21'),(50,'2015-12-22'),(51,'2015-12-23'),(52,'2015-12-24'),(53,'2015-12-28'),(54,'2015-12-29'),(55,'2015-12-30'),(56,'2015-12-31'),(57,'2016-01-01'),(58,'2016-01-04'),(59,'2016-01-05'),(60,'2016-01-06'),(61,'2016-01-07'),(62,'2016-01-08'),(63,'2016-01-11'),(64,'2016-01-12'),(65,'2016-01-13'),(66,'2016-01-14'),(67,'2016-01-15'),(68,'2016-01-18'),(69,'2016-01-19'),(70,'2016-01-20'),(71,'2016-01-21'),(72,'2016-01-22'),(73,'2016-01-25'),(74,'2016-01-27'),(75,'2016-01-28'),(76,'2016-01-29'),(77,'2016-02-01'),(78,'2016-02-02'),(79,'2016-02-03'),(80,'2016-02-04'),(81,'2016-02-05'),(82,'2016-02-08'),(83,'2016-02-09'),(84,'2016-02-10'),(85,'2016-02-11'),(86,'2016-02-12'),(87,'2016-02-15'),(88,'2016-02-16'),(89,'2016-02-17'),(90,'2016-02-18'),(91,'2016-02-19'),(92,'2016-02-22'),(93,'2016-02-23'),(94,'2016-02-24'),(95,'2016-02-25'),(96,'2016-02-26'),(97,'2016-02-29'),(98,'2016-03-01'),(99,'2016-03-02'),(100,'2016-03-03'),(101,'2016-03-04'),(102,'2016-03-08'),(103,'2016-03-09'),(104,'2016-03-10'),(105,'2016-03-11'),(106,'2016-03-14'),(107,'2016-03-15'),(108,'2016-03-16'),(109,'2016-03-17'),(110,'2016-03-18'),(111,'2016-03-21'),(112,'2016-03-22'),(113,'2016-03-23'),(114,'2016-03-28'),(115,'2016-03-29'),(116,'2016-03-30'),(117,'2016-03-31'),(118,'2016-04-01'),(119,'2016-04-04'),(120,'2016-04-05'),(121,'2016-04-06'),(122,'2016-04-07'),(123,'2016-04-08'),(124,'2016-04-11'),(125,'2016-04-12'),(126,'2016-04-13'),(127,'2016-04-18'),(128,'2016-04-20'),(129,'2016-04-21'),(130,'2016-04-22'),(131,'2016-04-25'),(132,'2016-04-26'),(133,'2016-04-27'),(134,'2016-04-28'),(135,'2016-04-29'),(136,'2016-05-02'),(137,'2016-05-03'),(138,'2016-05-04'),(139,'2016-05-05'),(140,'2016-05-06'),(141,'2016-05-09'),(142,'2016-05-10'),(143,'2016-05-11'),(144,'2016-05-12'),(145,'2016-05-13'),(146,'2016-05-16'),(147,'2016-05-17'),(148,'2016-05-18'),(149,'2016-05-19'),(150,'2016-05-20'),(151,'2016-05-23'),(152,'2016-05-24'),(153,'2016-05-25'),(154,'2016-05-26'),(155,'2016-05-27'),(156,'2016-05-30'),(157,'2016-05-31'),(158,'2016-06-01'),(159,'2016-06-02'),(160,'2016-06-03'),(161,'2016-06-06'),(162,'2016-06-07'),(163,'2016-06-08'),(164,'2016-06-09'),(165,'2016-06-10'),(166,'2016-06-13'),(167,'2016-06-14'),(168,'2016-06-15'),(169,'2016-06-16'),(170,'2016-06-17'),(171,'2016-06-20'),(172,'2016-06-21'),(173,'2016-06-22'),(174,'2016-06-23'),(175,'2016-06-24'),(176,'2016-06-27'),(177,'2016-06-28'),(178,'2016-06-29'),(179,'2016-06-30'),(180,'2016-07-01'),(181,'2016-07-04'),(182,'2016-07-05'),(183,'2016-07-07'),(184,'2016-07-08'),(185,'2016-07-11'),(186,'2016-07-12'),(187,'2016-07-13'),(188,'2016-07-14'),(189,'2016-07-15'),(190,'2016-07-18'),(191,'2016-07-19'),(192,'2016-07-20'),(193,'2016-07-21'),(194,'2016-07-22'),(195,'2016-07-25'),(196,'2016-07-26'),(197,'2016-07-27'),(198,'2016-07-28'),(199,'2016-07-29'),(200,'2016-08-01'),(201,'2016-08-02'),(202,'2016-08-03'),(203,'2016-08-04'),(204,'2016-08-05'),(205,'2016-08-08'),(206,'2016-08-09'),(207,'2016-08-10'),(208,'2016-08-11'),(209,'2016-08-12'),(210,'2016-08-16'),(211,'2016-08-17'),(212,'2016-08-18'),(213,'2016-08-19'),(214,'2016-08-22'),(215,'2016-08-23'),(216,'2016-08-24'),(217,'2016-08-25'),(218,'2016-08-26'),(219,'2016-08-29'),(220,'2016-08-30'),(221,'2016-08-31'),(222,'2016-09-01'),(223,'2016-09-02'),(224,'2016-09-06'),(225,'2016-09-07'),(226,'2016-09-08'),(227,'2016-09-09'),(228,'2016-09-12'),(229,'2016-09-14'),(230,'2016-09-15'),(231,'2016-09-16'),(232,'2016-09-19'),(233,'2016-09-20'),(234,'2016-09-21'),(235,'2016-09-22'),(236,'2016-09-23'),(237,'2016-09-26'),(238,'2016-09-27'),(239,'2016-09-28'),(240,'2016-09-29'),(241,'2016-09-30'),(242,'2016-10-03'),(243,'2016-10-04'),(244,'2016-10-05'),(245,'2016-10-06'),(246,'2016-10-07'),(247,'2016-10-10'),(248,'2016-10-13'),(249,'2016-10-14'),(250,'2016-10-17'),(251,'2016-10-18'),(252,'2016-10-19'),(253,'2016-10-20'),(254,'2016-10-21'),(255,'2016-10-24'),(256,'2016-10-25'),(257,'2016-10-26'),(258,'2016-10-27'),(259,'2016-10-28'),(260,'2016-10-30'),(261,'2016-11-01'),(262,'2016-11-02'),(263,'2016-11-03'),(264,'2016-11-04'),(265,'2016-11-07'),(266,'2016-11-08'),(267,'2016-11-09'),(268,'2016-11-10'),(269,'2016-11-11'),(270,'2016-11-15'),(271,'2016-11-16'),(272,'2016-11-17'),(273,'2016-11-18'),(274,'2016-11-21'),(275,'2016-11-22'),(276,'2016-11-23'),(277,'2016-11-24'),(278,'2016-11-25'),(279,'2016-11-28'),(280,'2016-11-29'),(281,'2016-11-30'),(282,'2016-12-01'),(283,'2016-12-02'),(284,'2016-12-05'),(285,'2016-12-06'),(286,'2016-12-07'),(287,'2016-12-08'),(288,'2016-12-09'),(289,'2016-12-12'),(290,'2016-12-13'),(291,'2016-12-14'),(292,'2016-12-15'),(293,'2016-12-16'),(294,'2016-12-19'),(295,'2016-12-20'),(296,'2016-12-21'),(297,'2016-12-22'),(298,'2016-12-23'),(299,'2016-12-26'),(300,'2016-12-27'),(301,'2016-12-28'),(302,'2016-12-29'),(303,'2016-12-30'),(304,'2017-01-02'),(305,'2017-01-03'),(306,'2017-01-04'),(307,'2017-01-05'),(308,'2017-01-06'),(309,'2017-01-09'),(310,'2017-01-10'),(311,'2017-01-11'),(312,'2017-01-12'),(313,'2017-01-13'),(314,'2017-01-16'),(315,'2017-01-17'),(316,'2017-01-18'),(317,'2017-01-19'),(318,'2017-01-20'),(319,'2017-01-23'),(320,'2017-01-24'),(321,'2017-01-25'),(322,'2017-01-27'),(323,'2017-01-30'),(324,'2017-01-31'),(325,'2017-02-01'),(326,'2017-02-02'),(327,'2017-02-03'),(328,'2017-02-06'),(329,'2017-02-07'),(330,'2017-02-08'),(331,'2017-02-09'),(332,'2017-02-10'),(333,'2017-02-13'),(334,'2017-02-14'),(335,'2017-02-15'),(336,'2017-02-16'),(337,'2017-02-17'),(338,'2017-02-20'),(339,'2017-02-21'),(340,'2017-02-22'),(341,'2017-02-23'),(342,'2017-02-27'),(343,'2017-02-28'),(344,'2017-03-01'),(345,'2017-03-02'),(346,'2017-03-03'),(347,'2017-03-06'),(348,'2017-03-07'),(349,'2017-03-08'),(350,'2017-03-09'),(351,'2017-03-10'),(352,'2017-03-14'),(353,'2017-03-15'),(354,'2017-03-16'),(355,'2017-03-17'),(356,'2017-03-20'),(357,'2017-03-21'),(358,'2017-03-22'),(359,'2017-03-23'),(360,'2017-03-24'),(361,'2017-03-27'),(362,'2017-03-28'),(363,'2017-03-29'),(364,'2017-03-30'),(365,'2017-03-31'),(366,'2017-04-03'),(367,'2017-04-05'),(368,'2017-04-06'),(369,'2017-04-07'),(370,'2017-04-10'),(371,'2017-04-11'),(372,'2017-04-12'),(373,'2017-04-13'),(374,'2017-04-17'),(375,'2017-04-18'),(376,'2017-04-19'),(377,'2017-04-20'),(378,'2017-04-21'),(379,'2017-04-24'),(380,'2017-04-25'),(381,'2017-04-26'),(382,'2017-04-27'),(383,'2017-04-28'),(384,'2017-05-02'),(385,'2017-05-03'),(386,'2017-05-04'),(387,'2017-05-05'),(388,'2017-05-08'),(389,'2017-05-09'),(390,'2017-05-10'),(391,'2017-05-11'),(392,'2017-05-12'),(393,'2017-05-15'),(394,'2017-05-16'),(395,'2017-05-17'),(396,'2017-05-18'),(397,'2017-05-19'),(398,'2017-05-22'),(399,'2017-05-23'),(400,'2017-05-24'),(401,'2017-05-25'),(402,'2017-05-26'),(403,'2017-05-29'),(404,'2017-05-30'),(405,'2017-05-31'),(406,'2017-06-01'),(407,'2017-06-02'),(408,'2017-06-05'),(409,'2017-06-06'),(410,'2017-06-07'),(411,'2017-06-08'),(412,'2017-06-09'),(413,'2017-06-12'),(414,'2017-06-13'),(415,'2017-06-14'),(416,'2017-06-15'),(417,'2017-06-16'),(418,'2017-06-19'),(419,'2017-06-20'),(420,'2017-06-21'),(421,'2017-06-22'),(422,'2017-06-23'),(423,'2017-06-27'),(424,'2017-06-28'),(425,'2017-06-29'),(426,'2017-06-30');
/*!40000 ALTER TABLE `market_sessions` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Dumping routines for database 'engine_has_pattern'
--
/*!50003 DROP PROCEDURE IF EXISTS `backtest_calculate_confidence` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `backtest_calculate_confidence`(
input_has_id int,
CALCULATED_SECOND_SHOULDER_TO_LOW_DURATION int)
proc_label: BEGIN

declare var_head_close_price float;

declare var_head_row_id int;

declare var_head_neckline_price float;

declare var_second_shoulder_low_row_id int;

declare second_shoulder_low_close_price float;

declare var_head_height float;

declare var_min_price float;

declare var_max_price float;

declare var_confidence_value float default -1;


-- declare var_neckline_slope float;

select a.second_shoulder_low_row_id,a.second_shoulder_low_close_price,
a.head_row_id,a.head_close_price from  engine_has_pattern.identified_has_data a
where a.has_id = input_has_id
into
var_second_shoulder_low_row_id,second_shoulder_low_close_price,
var_head_row_id,var_head_close_price;

select a.price_value from  engine_has_pattern.has_neckline_points a
where row_id = var_head_row_id
into var_head_neckline_price;

set var_head_height = var_head_close_price - var_head_neckline_price;

select max(a.CLOSE_PRICE) from  engine_has_pattern.equity_data_has_pattern a
where a.ROW_ID >  var_second_shoulder_low_row_id
and a.ROW_ID <=  (var_second_shoulder_low_row_id +  CALCULATED_SECOND_SHOULDER_TO_LOW_DURATION)

into var_max_price;

select min(a.CLOSE_PRICE) from  engine_has_pattern.equity_data_has_pattern a
where a.ROW_ID >  var_second_shoulder_low_row_id
and a.ROW_ID <=  (var_second_shoulder_low_row_id +  CALCULATED_SECOND_SHOULDER_TO_LOW_DURATION)

into var_min_price;

if var_max_price > second_shoulder_low_close_price
then

if ( var_max_price - second_shoulder_low_close_price) >   (second_shoulder_low_close_price - var_min_price)

then

set var_confidence_value = 0;

replace into engine_has_pattern.backtest_has_confidence
values(input_has_id,var_confidence_value);

leave proc_label;

end if;


end if;






set var_confidence_value = (second_shoulder_low_close_price -  var_min_price) * 100/
                            var_head_height;

replace into engine_has_pattern.backtest_has_confidence
values(input_has_id,var_confidence_value);



END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `backtest_identify_all_has_pattern_type` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `backtest_identify_all_has_pattern_type`(
duration_days INT)
BEGIN

  -- Declare variables used just for cursor and loop control
  DECLARE no_more_rows int;
  DECLARE loop_cntr INT DEFAULT 1;
  DECLARE num_rows INT DEFAULT 0;

  DECLARE var_has_id INT;
  DECLARE var_second_shoulder_top_row_id INT;
  DECLARE var_second_shoulder_top_close_price FLOAT;

  DECLARE calculated_cut_off_date DATE;

  DECLARE HEAD_DUR_PERC_OF_RALLY float DEFAULT 0.0;

  DECLARE CALCULATED_SECOND_SHOULDER_TO_LOW_DURATION int DEFAULT 0;
  DECLARE var_cut_off_date_row_id int;

  DECLARE identified_pattern_type INT;





      DECLARE identified_has_details CURSOR FOR
    SELECT DISTINCT
        has_id,second_shoulder_top_row_id, second_shoulder_top_close_price
        -- ,CURR_DATE,CLOSE_PRICE
    FROM engine_has_pattern.identified_has_data
    ORDER BY has_id ASC
;

   -- Declare 'handlers' for exceptions
  DECLARE CONTINUE HANDLER FOR NOT FOUND
    SET no_more_rows = 1;

SELECT rule_value/100 FROM engine_has_pattern.has_pattern_rules
where rule_name = 'HEAD_DURATION_PERCENTAGE_OF_RALLY' into  HEAD_DUR_PERC_OF_RALLY;

SET CALCULATED_SECOND_SHOULDER_TO_LOW_DURATION =    ROUND(2 * duration_days * HEAD_DUR_PERC_OF_RALLY );

delete from  engine_has_pattern.identified_has_pattern_type;

delete from engine_has_pattern.backtest_has_confidence;

OPEN identified_has_details;

 IF no_more_rows = 1 THEN
 close identified_has_details;
 END IF;

find_second_shoulder__low_loop : LOOP

 IF no_more_rows = 1 THEN
 LEAVE find_second_shoulder__low_loop;
 END IF;

FETCH identified_has_details INTO var_has_id,var_second_shoulder_top_row_id,
                                    var_second_shoulder_top_close_price;

 IF no_more_rows = 1 THEN
 LEAVE find_second_shoulder__low_loop;
 END IF;


select  a.curr_date from engine_has_pattern.equity_data_has_pattern a
where a.row_id =  (var_second_shoulder_top_row_id +  CALCULATED_SECOND_SHOULDER_TO_LOW_DURATION)
into calculated_cut_off_date;

call identify_has_pattern_type(duration_days,calculated_cut_off_date,var_has_id,var_second_shoulder_top_row_id,
                                    var_second_shoulder_top_close_price,
                                    CALCULATED_SECOND_SHOULDER_TO_LOW_DURATION
                                    );
select a.identified_pattern_type_id from engine_has_pattern.identified_has_pattern_type a
where a.has_id = var_has_id
into identified_pattern_type;

if    identified_pattern_type = 2
then

call engine_has_pattern.backtest_calculate_confidence(var_has_id,
CALCULATED_SECOND_SHOULDER_TO_LOW_DURATION);

end if;


-- call find_second_shoulder_low(current_head_row_id,current_head_close_price,duration_days);
 IF no_more_rows = 1 THEN
 LEAVE find_second_shoulder__low_loop;
 END IF;

END LOOP find_second_shoulder__low_loop;


 close identified_has_details;

END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `calculate_neckline_data` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `calculate_neckline_data`(
input_has_id int,
input_first_shoulder_low_row_id int,
input_first_shoulder_low_close_price float,
input_first_shoulder_low_date date,
input_head_low_row_id int,
input_head_low_close_price float,
duration_days INT)
BEGIN


declare neckline_slope float default 0.0;

declare price_diff_percentage float default 0.0;

declare VAR_MAX_NECKLINE_SLOPE_ABS_VALUE float default 0.0;



SELECT rule_value FROM engine_has_pattern.has_pattern_rules
where rule_name = 'MAX_NECKLINE_SLOPE_ABSOLUTE_VALUE' into  VAR_MAX_NECKLINE_SLOPE_ABS_VALUE;

set  price_diff_percentage =  (input_head_low_close_price - input_first_shoulder_low_close_price) * 100
                                /  input_first_shoulder_low_close_price;

set neckline_slope =  price_diff_percentage/ (input_head_low_row_id - input_first_shoulder_low_row_id);

if abs(neckline_slope) > VAR_MAX_NECKLINE_SLOPE_ABS_VALUE then

set neckline_slope = (neckline_slope/abs(neckline_slope)) * VAR_MAX_NECKLINE_SLOPE_ABS_VALUE;  -- set neckline slope to 0.5 or -0.5

end if;

replace INTO engine_has_pattern.identified_has_neckline_data
(has_id,
first_shoulder_low_row_id,
first_shoulder_low_date,
first_shoulder_low_close_price,
neckline_slope_value)
VALUES  (
input_has_id ,
input_first_shoulder_low_row_id ,
input_first_shoulder_low_date ,
input_first_shoulder_low_close_price ,
neckline_slope
);

call calculate_neckline_points(input_has_id,input_first_shoulder_low_row_id,input_first_shoulder_low_close_price,
neckline_slope,duration_days);

END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `calculate_neckline_points` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `calculate_neckline_points`(
input_has_id int,
input_first_shoulder_low_row_id int,
input_first_shoulder_low_close_price float,
input_neckline_slope float,
duration_days INT)
BEGIN

declare loop_counter int default 0;

declare calculated_price_value float default 0;

declare calculated_row_id int default 0;



set loop_counter =   duration_days / 2;

plot_neckline_loop : LOOP

 IF loop_counter = 0 THEN
 LEAVE plot_neckline_loop;
 END IF;

 set calculated_row_id = loop_counter + input_first_shoulder_low_row_id;

 set calculated_price_value =  input_first_shoulder_low_close_price +
                                 ((loop_counter * input_neckline_slope) * input_first_shoulder_low_close_price/ 100);


 set calculated_price_value = (round(calculated_price_value/0.05)) * 0.05;                                

replace INTO engine_has_pattern.has_neckline_points
( select  input_has_id,calculated_row_id,a.session_date,calculated_price_value
from engine_has_pattern.market_sessions  a
where   a.ROW_ID = calculated_row_id
);



 set loop_counter = loop_counter - 1;

END LOOP plot_neckline_loop;



END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `data_accumulation` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `data_accumulation`(symbol_in varchar(45),
startDate date,
endDate date,
duration_days INT)
BEGIN


delete from engine_has_pattern.equity_data_has_pattern;

ALTER TABLE engine_has_pattern.equity_data_has_pattern AUTO_INCREMENT =1;


INSERT INTO engine_has_pattern.equity_data_has_pattern

(select NULL,SYMBOL,
CURR_DATE,
PREV_CLOSE,
OPEN_PRICE,
HIGH_PRICE,
LOW_PRICE,
LAST_PRICE,
CLOSE_PRICE,
AVERAGE_PRICE,
TOTAL_TRADED_QUANTITY,
TURNOVER,
NO_OF_TRADES,
DELIVERABLE_QTY,
PERCENT_DELIVERABLE_QTY
 from engine_ea.equity_data_main where symbol = symbol_in
 and CURR_DATE between startDate and
 date_add(endDate, INTERVAL (duration_days/2) day)
 -- endDate
 );


delete from engine_has_pattern.market_sessions;

replace INTO engine_has_pattern.market_sessions

(select a.ROW_ID,a.CURR_DATE from engine_has_pattern.equity_data_has_pattern a);

delete from engine_has_pattern.equity_data_has_pattern  where  CURR_DATE >  endDate;

call validate_market_sessions_data(endDate,duration_days);

END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `find_first_shoulder` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `find_first_shoulder`(
duration_days INT)
BEGIN

  -- Declare variables used just for cursor and loop control
  DECLARE no_more_rows int;
  DECLARE num_rows INT DEFAULT 0;

  DECLARE current_close_price float DEFAULT 0;

  DECLARE previous_close_price float DEFAULT 0;

  DECLARE current_row_id int DEFAULT 0;

  DECLARE previous_row_id int DEFAULT 0;

  DECLARE current_row_date DATE;

  DECLARE previous_row_date DATE;

  DECLARE HEAD_DUR_PERC_OF_RALLY float DEFAULT 0.0;

  DECLARE CALCULATED_SHOULDER_HEAD_DURATION int DEFAULT 0;




    DECLARE has_rally_tops CURSOR FOR
    SELECT DISTINCT
        ROW_ID,CURR_DATE,CLOSE_PRICE
    FROM engine_has_pattern.equity_data_has_pattern_rally_top
    ORDER BY ROW_ID ASC
;



  -- Declare 'handlers' for exceptions
  DECLARE CONTINUE HANDLER FOR NOT FOUND
    SET no_more_rows = 1;

SELECT rule_value/100 FROM engine_has_pattern.has_pattern_rules
where rule_name = 'HEAD_DURATION_PERCENTAGE_OF_RALLY' into  HEAD_DUR_PERC_OF_RALLY;

SET CALCULATED_SHOULDER_HEAD_DURATION =   2 * ROUND(duration_days * HEAD_DUR_PERC_OF_RALLY );

delete from engine_has_pattern.has_first_shoulder_data;

OPEN has_rally_tops;

 IF no_more_rows = 1 THEN
 close has_rally_tops;
 END IF;

FETCH has_rally_tops INTO previous_row_id,previous_row_date,previous_close_price;

SELECT curr_date FROM engine_has_pattern.equity_data_has_pattern
where row_id = previous_row_id
into previous_row_date;


rally_loop : LOOP

 IF no_more_rows = 1 THEN
 LEAVE rally_loop;
 END IF;


FETCH has_rally_tops INTO current_row_id,current_row_date,current_close_price;

 IF no_more_rows = 1 THEN
 LEAVE rally_loop;
 END IF;

SELECT curr_date FROM engine_has_pattern.equity_data_has_pattern
where row_id = current_row_id
into current_row_date;

IF( current_row_id -  previous_row_id <=  CALCULATED_SHOULDER_HEAD_DURATION
and current_close_price > previous_close_price) THEN

insert into engine_has_pattern.has_first_shoulder_data
values(previous_row_id,previous_row_date,previous_close_price,null,null,null,
current_row_id,current_row_date,current_close_price,null,null,null);

call find_first_shoulder_and_head_low(previous_row_id,current_row_id,duration_days);


END IF;


 set  previous_row_id =   current_row_id;
 set  previous_row_date =   current_row_date;
 set  previous_close_price =   current_close_price;

END LOOP rally_loop;

CLOSE has_rally_tops;




END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `find_first_shoulder_and_head_low` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `find_first_shoulder_and_head_low`(
input_shoulder_top_row_id INT,
input_head_row_id INT,
duration_days INT)
BEGIN

DECLARE HEAD_DUR_PERC_OF_RALLY float DEFAULT 0.0;

DECLARE CALCULATED_RALLY_LOW_DURATION int DEFAULT 0;

DECLARE target_close_price float DEFAULT 0;


DECLARE target_row_id int DEFAULT 0;


DECLARE target_row_date date;


SELECT rule_value/100 FROM engine_has_pattern.has_pattern_rules
where rule_name = 'HEAD_DURATION_PERCENTAGE_OF_RALLY' into  HEAD_DUR_PERC_OF_RALLY;

SET CALCULATED_RALLY_LOW_DURATION =   ROUND(duration_days * HEAD_DUR_PERC_OF_RALLY );


-- update first shoulder related low point details


SELECT a.row_id, a.curr_date, a. CLOSE_PRICE FROM engine_has_pattern.equity_data_has_pattern a
WHERE a.close_price =
( SELECT min(b.close_price) FROM
engine_has_pattern.equity_data_has_pattern b
where 1=1
and b.row_id > input_shoulder_top_row_id
and b.row_id <= (input_shoulder_top_row_id + CALCULATED_RALLY_LOW_DURATION)
)
and a.row_id > input_shoulder_top_row_id
and a.row_id <= (input_shoulder_top_row_id + CALCULATED_RALLY_LOW_DURATION)

into target_row_id,target_row_date,target_close_price;

update engine_has_pattern.has_first_shoulder_data
set  first_shoulder_low_row_id = target_row_id,
first_shoulder_low_date = target_row_date,
first_shoulder_low_close_price = target_close_price
where first_shoulder_top_row_id = input_shoulder_top_row_id;


-- update head related low point details

SELECT a.row_id, a.curr_date, a. CLOSE_PRICE FROM engine_has_pattern.equity_data_has_pattern a
WHERE a.close_price =
( SELECT min(b.close_price) FROM
engine_has_pattern.equity_data_has_pattern b
where 1=1
and b.row_id > input_head_row_id
and b.row_id <= (input_head_row_id + CALCULATED_RALLY_LOW_DURATION)
)
and a.row_id > input_head_row_id
and a.row_id <= (input_head_row_id + CALCULATED_RALLY_LOW_DURATION)

into target_row_id,target_row_date,target_close_price;

update engine_has_pattern.has_first_shoulder_data
set  head_low_row_id = target_row_id,
head_low_date = target_row_date,
head_low_close_price = target_close_price
where first_shoulder_top_row_id = input_shoulder_top_row_id;







END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `find_has` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `find_has`(
symbol_in varchar(45),
duration_days INT,
startDate date,
endDate date
-- ,input_pattern_type_id int
)
BEGIN

call data_accumulation(symbol_in,startDate,endDate,duration_days);

call engine_has_pattern.find_rally_top(duration_days);

call engine_has_pattern.find_first_shoulder(duration_days);

call find_second_shoulder_for_has(symbol_in,duration_days);

-- call identify_all_has_pattern_type(duration_days,endDate);







END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `find_rally_top` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `find_rally_top`(
duration_days INT)
BEGIN

DECLARE HEAD_DUR_PERC_OF_RALLY float DEFAULT 0.0;

DECLARE CALCULATED_RALLY_TOP_DURATION int DEFAULT 0;


SELECT rule_value/100 FROM engine_has_pattern.has_pattern_rules
where rule_name = 'HEAD_DURATION_PERCENTAGE_OF_RALLY' into  HEAD_DUR_PERC_OF_RALLY;

SET CALCULATED_RALLY_TOP_DURATION =  2* ROUND(duration_days * HEAD_DUR_PERC_OF_RALLY );


delete from engine_has_pattern.equity_data_has_pattern_top_temp;

insert into engine_has_pattern.equity_data_has_pattern_top_temp(

SELECT distinct a.* FROM engine_has_pattern.equity_data_has_pattern a
where a.close_price >
(SELECT max(close_price) FROM engine_has_pattern.equity_data_has_pattern b
where DATEDIFF(a.curr_date,b.curr_date) <= duration_days
and DATEDIFF(a.curr_date,b.curr_date) > 0 )
) ;


delete from engine_has_pattern.equity_data_has_pattern_rally_top;

insert into engine_has_pattern.equity_data_has_pattern_rally_top(
SELECT distinct a.* FROM engine_has_pattern.equity_data_has_pattern_top_temp a
WHERE a.close_price >
( SELECT max(b.close_price) FROM
engine_has_pattern.equity_data_has_pattern b
where 1=1
and b.row_id - a.row_id <= CALCULATED_RALLY_TOP_DURATION
and b.row_id - a.row_id > 0
)
);


/*
insert into engine_has_pattern.equity_data_has_pattern_rally_top(
SELECT a.* FROM engine_has_pattern.equity_data_has_pattern_top_temp a
WHERE NOT EXISTS
( SELECT curr_date FROM
engine_has_pattern.equity_data_has_pattern_top_temp b
where 1=1
AND DATEDIFF(b.curr_date,a.curr_date) < duration_days
AND DATEDIFF(b.curr_date,a.curr_date) > 0
)
)
;
*/






END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `find_second_shoulder` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `find_second_shoulder`(
symbol_in varchar(45),
input_head_row_id int,
input_head_close_price float,
input_head_low_price float,
duration_days INT
)
proc_label: BEGIN




  DECLARE HEAD_DUR_PERC_OF_RALLY float DEFAULT 0.0;

  DECLARE CALCULATED_HEAD_TO_SHOULDER_DURATION int DEFAULT 0;


  DECLARE var_has_id int;
  DECLARE var_first_shoulder_low_row_id int;
  DECLARE var_first_shoulder_low_close_price float;
  DECLARE var_first_shoulder_low_date date;
   DECLARE var_head_low_row_id int;
  DECLARE var_head_low_close_price float;

    DECLARE var_second_shoulder_count float;



  -- DECLARE VAR_HEAD_ROW_ID INT DEFAULT 0;





SELECT rule_value/100 FROM engine_has_pattern.has_pattern_rules
where rule_name = 'HEAD_DURATION_PERCENTAGE_OF_RALLY' into  HEAD_DUR_PERC_OF_RALLY;

SET CALCULATED_HEAD_TO_SHOULDER_DURATION =    2 * ROUND(duration_days * HEAD_DUR_PERC_OF_RALLY );


SELECT count(*) FROM engine_has_pattern.equity_data_has_pattern a
where a.close_price =
(SELECT max(close_price) FROM engine_has_pattern.equity_data_has_pattern b
where 1=1
and b.row_id > input_head_row_id
and b.row_id <= (input_head_row_id +  CALCULATED_HEAD_TO_SHOULDER_DURATION)
)
and a.CLOSE_PRICE < input_head_close_price
and a.CLOSE_PRICE > input_head_low_price

into var_second_shoulder_count;

if(var_second_shoulder_count = 0) then

leave proc_label;

end if;



replace into engine_has_pattern.equity_data_has_second_shoulder_top(

SELECT distinct input_head_row_id,a.* FROM engine_has_pattern.equity_data_has_pattern a
where a.close_price =
(SELECT max(close_price) FROM engine_has_pattern.equity_data_has_pattern b
where 1=1
and b.row_id > input_head_row_id
and b.row_id <= (input_head_row_id +  CALCULATED_HEAD_TO_SHOULDER_DURATION)
)
and a.CLOSE_PRICE < input_head_close_price
and a.CLOSE_PRICE > input_head_low_price
)
;

replace into engine_has_pattern.identified_has_data(
select null,symbol_in, a.*,null,null,null,null,null,null from   engine_has_pattern.has_first_shoulder_data a
where a.head_row_id = input_head_row_id);

update  engine_has_pattern.identified_has_data a, engine_has_pattern.equity_data_has_second_shoulder_top b
set a.second_shoulder_top_row_id = b.ROW_ID,
a.second_shoulder_top_date = b.CURR_DATE,
a.second_shoulder_top_close_price = b.CLOSE_PRICE
where a.head_row_id = b.head_row_id;

select a.has_id,a.first_shoulder_low_row_id,a.first_shoulder_low_close_price, a.first_shoulder_low_date,
a.head_low_row_id,a.head_low_close_price from engine_has_pattern.identified_has_data a
where a.head_row_id = input_head_row_id
into  var_has_id,var_first_shoulder_low_row_id,var_first_shoulder_low_close_price, var_first_shoulder_low_date,
var_head_low_row_id,var_head_low_close_price;


call engine_has_pattern.calculate_neckline_data(var_has_id,var_first_shoulder_low_row_id,var_first_shoulder_low_close_price,
var_first_shoulder_low_date,var_head_low_row_id,var_head_low_close_price,duration_days);


-- call engine_has_pattern.identify_has_pattern_type





END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `find_second_shoulder_for_has` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `find_second_shoulder_for_has`(
symbol_in varchar(45),
duration_days INT
)
BEGIN


  -- Declare variables used just for cursor and loop control
  DECLARE no_more_rows int;
  DECLARE loop_cntr INT DEFAULT 1;
  DECLARE num_rows INT DEFAULT 0;

  DECLARE current_head_close_price float DEFAULT 0;

  DECLARE current_head_row_id int DEFAULT 0;

  DECLARE current_head_low_price float DEFAULT 0;



    DECLARE has_first_shoulder_details CURSOR FOR
    SELECT DISTINCT
        head_row_id,head_close_price,head_low_close_price
        -- ,CURR_DATE,CLOSE_PRICE
    FROM engine_has_pattern.has_first_shoulder_data
    ORDER BY head_row_id ASC
;

  -- Declare 'handlers' for exceptions
  DECLARE CONTINUE HANDLER FOR NOT FOUND
    SET no_more_rows = 1;

delete from engine_has_pattern.equity_data_has_second_shoulder_top;

if (select max(has_id) from engine_has_pattern.identified_has_data) > 10000
then
ALTER TABLE engine_has_pattern.equity_data_has_pattern AUTO_INCREMENT =1;
end if;

delete from engine_has_pattern.identified_has_data;

delete from  engine_has_pattern.has_neckline_points;
delete from  engine_has_pattern.identified_has_neckline_data;



OPEN has_first_shoulder_details;

 IF no_more_rows = 1 THEN
 close has_first_shoulder_details;
 END IF;

find_second_shoulder_loop : LOOP

 IF no_more_rows = 1 THEN
 LEAVE find_second_shoulder_loop;
 END IF;

FETCH has_first_shoulder_details INTO current_head_row_id,current_head_close_price,current_head_low_price;

 IF no_more_rows = 1 THEN
 LEAVE find_second_shoulder_loop;
 END IF;

call find_second_shoulder(symbol_in,current_head_row_id,current_head_close_price,current_head_low_price,duration_days);

-- call find_second_shoulder_low(current_head_row_id,current_head_close_price,duration_days);
 IF no_more_rows = 1 THEN
 LEAVE find_second_shoulder_loop;
 END IF;

END LOOP find_second_shoulder_loop;


close has_first_shoulder_details;





END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `identify_as_pattern_type_1_or_2` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `identify_as_pattern_type_1_or_2`(
input_endDate_row_id int,
input_has_id int,
input_second_shoulder_top_row_id int,
input_second_shoulder_top_close_price float,
CALCULATED_SECOND_SHOULDER_TO_LOW_DURATION int
)
proc_label: BEGIN


declare var_shoulder_low_min_close_price float(10,2);

declare var_shoulder_low_min_row_id int;

declare var_shoulder_low_min_row_date date;




declare var_shoulder_low_slope float(10,2);

declare var_neckline_slope float(10,2);

declare var_effective_slope float(10,2);


declare price_diff_percentage float(10,2);


declare var_shoulder_top_neckline_price float(10,2);


declare var_shoulder_height_percentage float(10,2);

declare identified_as_type_2 boolean;






select min(CLOSE_PRICE) from engine_has_pattern.equity_data_has_pattern
where ROW_ID >  input_second_shoulder_top_row_id
and ROW_ID <=    input_endDate_row_id
into var_shoulder_low_min_close_price;

call identify_as_pattern_type_2(input_has_id,input_endDate_row_id, var_shoulder_low_min_close_price,
input_second_shoulder_top_row_id,identified_as_type_2);

if identified_as_type_2 = true
then

leave proc_label;

end if;


-- identify if pattern type 1 --


select ROW_ID,CURR_DATE from engine_has_pattern.equity_data_has_pattern
where ROW_ID >  input_second_shoulder_top_row_id
and ROW_ID <=    input_endDate_row_id
and FORMAT(CLOSE_PRICE,2)  = FORMAT(var_shoulder_low_min_close_price,2)
order by  ROW_ID desc
limit 1
into var_shoulder_low_min_row_id,var_shoulder_low_min_row_date;

select a.price_value from engine_has_pattern.has_neckline_points a
where a.has_id = input_has_id
and a.row_id = input_second_shoulder_top_row_id
into var_shoulder_top_neckline_price;

set  price_diff_percentage =  (var_shoulder_low_min_close_price - input_second_shoulder_top_close_price) * 100
                                /  input_second_shoulder_top_close_price;

set var_shoulder_low_slope =  price_diff_percentage/ (var_shoulder_low_min_row_id - input_second_shoulder_top_row_id);

select a.neckline_slope_value from engine_has_pattern.identified_has_neckline_data a
where a.has_id = input_has_id
into var_neckline_slope;

set var_effective_slope = var_shoulder_low_slope - var_neckline_slope;



set var_shoulder_height_percentage = (input_second_shoulder_top_close_price - var_shoulder_top_neckline_price) * 100/

                                                    input_second_shoulder_top_close_price;


if ((var_effective_slope * CALCULATED_SECOND_SHOULDER_TO_LOW_DURATION)   + var_shoulder_height_percentage)  < 0

then

replace into engine_has_pattern.identified_has_pattern_type values(input_has_id,1);

update engine_has_pattern.identified_has_data a
set  second_shoulder_low_row_id = var_shoulder_low_min_row_id,
second_shoulder_low_date =  var_shoulder_low_min_row_date,
second_shoulder_low_close_price = var_shoulder_low_min_close_price
where has_id = input_has_id;

end if;







END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `identify_as_pattern_type_2` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `identify_as_pattern_type_2`(
input_has_id int,
input_endDate_row_id int,
input_shoulder_low_min_close_price float,
input_second_shoulder_top_row_id int,
out output_identified boolean
)
BEGIN

declare var_current_close_price float(10,2);

declare var_current_date date;

declare var_current_row_id int;



  -- Declare variables used just for cursor and loop control
  DECLARE no_more_rows int;
  DECLARE loop_cntr INT DEFAULT 1;
  DECLARE num_rows INT DEFAULT 0;

      DECLARE identified_neckline_points CURSOR FOR
    SELECT DISTINCT
           row_id,curr_date,price_value
        -- ,CURR_DATE,CLOSE_PRICE
    FROM engine_has_pattern.has_neckline_points a
    where   has_id = input_has_id
    and row_id > input_second_shoulder_top_row_id
    and row_id <= input_endDate_row_id
    ORDER BY curr_date ASC
;


  -- Declare 'handlers' for exceptions
  DECLARE CONTINUE HANDLER FOR NOT FOUND
    SET no_more_rows = 1;



OPEN identified_neckline_points;

 IF no_more_rows = 1 THEN
 close identified_neckline_points;
 END IF;

identified_neckline_points_loop : LOOP

 IF no_more_rows = 1 THEN
 LEAVE identified_neckline_points_loop;
 END IF;

FETCH identified_neckline_points INTO var_current_row_id,var_current_date,var_current_close_price;

 IF no_more_rows = 1 THEN
 LEAVE identified_neckline_points_loop;
 END IF;


 if (input_shoulder_low_min_close_price <=  var_current_close_price)
 then

 select a.curr_date from engine_has_pattern.has_neckline_points a
 where a.row_id = var_current_row_id
 into var_current_date;

replace into engine_has_pattern.identified_has_pattern_type values(input_has_id,2);

set output_identified = true;

update engine_has_pattern.identified_has_data a
set  second_shoulder_low_row_id = var_current_row_id,
second_shoulder_low_date =  var_current_date,
second_shoulder_low_close_price = input_shoulder_low_min_close_price
where has_id = input_has_id;


end if;
 IF no_more_rows = 1 THEN
 LEAVE identified_neckline_points_loop;
 END IF;

END LOOP identified_neckline_points_loop;


 close identified_neckline_points;



END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `identify_has_pattern_type` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `identify_has_pattern_type`(
duration_days INT,
cut_off_date date,
input_has_id int,
input_second_shoulder_top_row_id int,
input_second_shoulder_top_close_price float,
CALCULATED_SECOND_SHOULDER_TO_LOW_DURATION int
)
proc_label: BEGIN

declare var_cut_off_date_row_id int;

select a.ROW_ID from engine_has_pattern.equity_data_has_pattern a
where a.CURR_DATE = cut_off_date into var_cut_off_date_row_id;

IF ((var_cut_off_date_row_id -  input_second_shoulder_top_row_id  = 0) AND duration_days <= 30)
THEN

replace into engine_has_pattern.identified_has_pattern_type values(var_has_id,1);

LEAVE proc_label;


END IF;


IF (var_cut_off_date_row_id -  input_second_shoulder_top_row_id <   (0.2 * CALCULATED_SECOND_SHOULDER_TO_LOW_DURATION))
THEN

LEAVE proc_label;

END IF;

IF (var_cut_off_date_row_id -  input_second_shoulder_top_row_id <=   CALCULATED_SECOND_SHOULDER_TO_LOW_DURATION)
THEN


call identify_as_pattern_type_1_or_2(var_cut_off_date_row_id,input_has_id,input_second_shoulder_top_row_id,
input_second_shoulder_top_close_price,
CALCULATED_SECOND_SHOULDER_TO_LOW_DURATION);

LEAVE proc_label;

-- calculate(

END IF;



END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `validate_market_sessions_data` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `validate_market_sessions_data`(
endDate date,
duration_days INT)
proc_label: BEGIN

declare max_session_date date;

declare target_session_date date;


declare max_session_date_sr_no int;

declare end_date_sr_no int;

declare max_session_date_row_id int;

declare loop_counter int;





select max(a.session_date) from engine_has_pattern.market_sessions a  into max_session_date;

set target_session_date =  date_add(endDate, INTERVAL (duration_days/2) day);

if max_session_date  < target_session_date
then

select max(a.row_id) from engine_has_pattern.market_sessions a  into max_session_date_row_id;


select a.SR_NO from engine_ea.market_sessions a
where a.SESSION_DATE =  max_session_date
into max_session_date_sr_no;

if (max_session_date_sr_no is null) then

leave proc_label;

end if;

set end_date_sr_no =  max_session_date_sr_no + round(5 * datediff(target_session_date,max_session_date)/7);

set loop_counter = 1;


fill_market_sessions : LOOP

 IF loop_counter > (end_date_sr_no - max_session_date_sr_no) THEN
 LEAVE fill_market_sessions;
 END IF;

replace INTO engine_has_pattern.market_sessions

(select (max_session_date_row_id + loop_counter),a.SESSION_DATE from engine_ea.market_sessions a
where a.SR_NO = (max_session_date_sr_no  + loop_counter)
)
;


 set loop_counter = loop_counter + 1;

 end  loop fill_market_sessions;


end if;

END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;

--
-- Current Database: `prediction_has_pattern`
--

CREATE DATABASE /*!32312 IF NOT EXISTS*/ `prediction_has_pattern` /*!40100 DEFAULT CHARACTER SET utf8 */;

USE `prediction_has_pattern`;

--
-- Table structure for table `backtest_has_confidence`
--

DROP TABLE IF EXISTS `backtest_has_confidence`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `backtest_has_confidence` (
  `has_evaluation_run_id` int(11) NOT NULL,
  `has_id` int(11) NOT NULL,
  `confidence_value` float DEFAULT NULL,
  PRIMARY KEY (`has_evaluation_run_id`,`has_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `backtest_has_confidence`
--

LOCK TABLES `backtest_has_confidence` WRITE;
/*!40000 ALTER TABLE `backtest_has_confidence` DISABLE KEYS */;
INSERT INTO `backtest_has_confidence` VALUES (45,133,105.042),(45,134,85.1852);
/*!40000 ALTER TABLE `backtest_has_confidence` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `has_evaluation_run`
--

DROP TABLE IF EXISTS `has_evaluation_run`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `has_evaluation_run` (
  `has_evaluation_run_id` int(11) NOT NULL AUTO_INCREMENT,
  `symbol` varchar(45) DEFAULT NULL,
  `curr_date` date DEFAULT NULL,
  `duration_days` int(11) DEFAULT NULL,
  PRIMARY KEY (`has_evaluation_run_id`)
) ENGINE=InnoDB AUTO_INCREMENT=50 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `has_evaluation_run`
--

LOCK TABLES `has_evaluation_run` WRITE;
/*!40000 ALTER TABLE `has_evaluation_run` DISABLE KEYS */;
INSERT INTO `has_evaluation_run` VALUES (1,'SBIN','2017-05-29',30),(2,'SBIN','2017-05-29',30),(3,'SBIN','2017-05-29',30),(4,'SBIN','2017-05-29',30),(5,'SBIN','2017-05-29',30),(6,'SBIN','2017-05-29',30),(7,'SBIN','2017-05-29',30),(8,'SBIN','2017-05-29',30),(9,'SBIN','2017-05-29',30),(10,'SBIN','2017-05-29',30),(11,'SBIN','2017-05-29',30),(12,'SBIN','2017-05-31',30),(13,'SBIN','2017-05-31',30),(14,'SBIN','2017-05-31',30),(15,'SBIN','2017-05-31',30),(16,'SBIN','2017-05-31',30),(17,'SBIN','2017-05-31',30),(18,'SBIN','2017-05-31',30),(19,'SBIN','2017-05-31',30),(20,'SBIN','2017-05-31',30),(21,'SBIN','2017-05-31',30),(22,'SBIN','2017-05-31',30),(23,'SBIN','2017-05-31',30),(24,'SBIN','2017-05-31',30),(25,'SBIN','2017-05-31',30),(26,'SBIN','2017-05-31',30),(27,'SBIN','2017-05-31',30),(28,'SBIN','2017-05-31',30),(29,'SBIN','2017-05-31',30),(30,'SBIN','2017-05-31',30),(31,'SBIN','2017-05-31',30),(32,'SBIN','2017-05-31',30),(33,'SBIN','2017-05-31',30),(34,'SBIN','2017-05-31',30),(35,'SBIN','2017-05-31',30),(36,'SBIN','2017-05-31',30),(37,'SBIN','2017-05-31',60),(38,'SBIN','2017-05-31',30),(39,'SBIN','2017-05-31',30),(40,'SBIN','2017-05-31',30),(41,'SBIN','2017-05-31',30),(42,'SBIN','2017-05-31',30),(43,'SBIN','2017-05-31',30),(44,'SBIN','2017-05-31',30),(45,'SBIN','2017-05-31',30),(46,'SBIN','2017-05-31',30),(47,'SBIN','2017-05-31',60),(48,'SBIN','2017-05-31',60),(49,'SBIN','2017-05-31',60);
/*!40000 ALTER TABLE `has_evaluation_run` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `has_neckline_points`
--

DROP TABLE IF EXISTS `has_neckline_points`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `has_neckline_points` (
  `has_evaluation_run_id` int(11) NOT NULL,
  `has_id` int(11) NOT NULL,
  `row_id` int(11) NOT NULL,
  `curr_date` date DEFAULT NULL,
  `price_value` float(10,2) DEFAULT NULL,
  PRIMARY KEY (`has_evaluation_run_id`,`has_id`,`row_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `has_neckline_points`
--

LOCK TABLES `has_neckline_points` WRITE;
/*!40000 ALTER TABLE `has_neckline_points` DISABLE KEYS */;
INSERT INTO `has_neckline_points` VALUES (28,85,34,'2017-05-23',188.85),(28,85,35,'2017-05-24',189.45),(28,85,36,'2017-05-25',190.00),(28,85,37,'2017-05-26',190.55),(28,85,38,'2017-05-29',191.10),(28,85,39,'2017-05-30',191.70),(28,85,40,'2017-05-31',192.25),(28,85,41,'2017-06-01',192.80),(28,85,42,'2017-06-02',193.40),(28,85,43,'2017-06-05',193.95),(28,85,44,'2017-06-06',194.50),(28,85,45,'2017-06-07',195.10),(28,85,46,'2017-06-08',195.65),(28,85,47,'2017-06-09',196.20),(28,85,48,'2017-06-12',196.75),(29,89,34,'2017-05-23',188.85),(29,89,35,'2017-05-24',189.45),(29,89,36,'2017-05-25',190.00),(29,89,37,'2017-05-26',190.55),(29,89,38,'2017-05-29',191.10),(29,89,39,'2017-05-30',191.70),(29,89,40,'2017-05-31',192.25),(29,89,41,'2017-06-01',192.80),(29,89,42,'2017-06-02',193.40),(29,89,43,'2017-06-05',193.95),(29,89,44,'2017-06-06',194.50),(29,89,45,'2017-06-07',195.10),(29,89,46,'2017-06-08',195.65),(29,89,47,'2017-06-09',196.20),(29,89,48,'2017-06-12',196.75),(30,92,34,'2017-05-23',188.85),(30,92,35,'2017-05-24',189.45),(30,92,36,'2017-05-25',190.00),(30,92,37,'2017-05-26',190.55),(30,92,38,'2017-05-29',191.10),(30,92,39,'2017-05-30',191.70),(30,92,40,'2017-05-31',192.25),(30,92,41,'2017-06-01',192.80),(30,92,42,'2017-06-02',193.40),(30,92,43,'2017-06-05',193.95),(30,92,44,'2017-06-06',194.50),(30,92,45,'2017-06-07',195.10),(30,92,46,'2017-06-08',195.65),(30,92,47,'2017-06-09',196.20),(30,92,48,'2017-06-12',196.75),(31,95,34,'2017-05-23',188.85),(31,95,35,'2017-05-24',189.45),(31,95,36,'2017-05-25',190.00),(31,95,37,'2017-05-26',190.55),(31,95,38,'2017-05-29',191.10),(31,95,39,'2017-05-30',191.70),(31,95,40,'2017-05-31',192.25),(31,95,41,'2017-06-01',192.80),(31,95,42,'2017-06-02',193.40),(31,95,43,'2017-06-05',193.95),(31,95,44,'2017-06-06',194.50),(31,95,45,'2017-06-07',195.10),(31,95,46,'2017-06-08',195.65),(31,95,47,'2017-06-09',196.20),(31,95,48,'2017-06-12',196.75),(32,98,34,'2017-05-23',188.85),(32,98,35,'2017-05-24',189.45),(32,98,36,'2017-05-25',190.00),(32,98,37,'2017-05-26',190.55),(32,98,38,'2017-05-29',191.10),(32,98,39,'2017-05-30',191.70),(32,98,40,'2017-05-31',192.25),(32,98,41,'2017-06-01',192.80),(32,98,42,'2017-06-02',193.40),(32,98,43,'2017-06-05',193.95),(32,98,44,'2017-06-06',194.50),(32,98,45,'2017-06-07',195.10),(32,98,46,'2017-06-08',195.65),(32,98,47,'2017-06-09',196.20),(32,98,48,'2017-06-12',196.75),(33,101,34,'2017-05-23',188.85),(33,101,35,'2017-05-24',189.45),(33,101,36,'2017-05-25',190.00),(33,101,37,'2017-05-26',190.55),(33,101,38,'2017-05-29',191.10),(33,101,39,'2017-05-30',191.70),(33,101,40,'2017-05-31',192.25),(33,101,41,'2017-06-01',192.80),(33,101,42,'2017-06-02',193.40),(33,101,43,'2017-06-05',193.95),(33,101,44,'2017-06-06',194.50),(33,101,45,'2017-06-07',195.10),(33,101,46,'2017-06-08',195.65),(33,101,47,'2017-06-09',196.20),(33,101,48,'2017-06-12',196.75),(34,104,34,'2017-05-23',188.85),(34,104,35,'2017-05-24',189.45),(34,104,36,'2017-05-25',190.00),(34,104,37,'2017-05-26',190.55),(34,104,38,'2017-05-29',191.10),(34,104,39,'2017-05-30',191.70),(34,104,40,'2017-05-31',192.25),(34,104,41,'2017-06-01',192.80),(34,104,42,'2017-06-02',193.40),(34,104,43,'2017-06-05',193.95),(34,104,44,'2017-06-06',194.50),(34,104,45,'2017-06-07',195.10),(34,104,46,'2017-06-08',195.65),(34,104,47,'2017-06-09',196.20),(34,104,48,'2017-06-12',196.75),(35,107,34,'2017-05-23',188.85),(35,107,35,'2017-05-24',189.45),(35,107,36,'2017-05-25',190.00),(35,107,37,'2017-05-26',190.55),(35,107,38,'2017-05-29',191.10),(35,107,39,'2017-05-30',191.70),(35,107,40,'2017-05-31',192.25),(35,107,41,'2017-06-01',192.80),(35,107,42,'2017-06-02',193.40),(35,107,43,'2017-06-05',193.95),(35,107,44,'2017-06-06',194.50),(35,107,45,'2017-06-07',195.10),(35,107,46,'2017-06-08',195.65),(35,107,47,'2017-06-09',196.20),(35,107,48,'2017-06-12',196.75),(36,110,34,'2017-05-23',188.85),(36,110,35,'2017-05-24',189.45),(36,110,36,'2017-05-25',190.00),(36,110,37,'2017-05-26',190.55),(36,110,38,'2017-05-29',191.10),(36,110,39,'2017-05-30',191.70),(36,110,40,'2017-05-31',192.25),(36,110,41,'2017-06-01',192.80),(36,110,42,'2017-06-02',193.40),(36,110,43,'2017-06-05',193.95),(36,110,44,'2017-06-06',194.50),(36,110,45,'2017-06-07',195.10),(36,110,46,'2017-06-08',195.65),(36,110,47,'2017-06-09',196.20),(36,110,48,'2017-06-12',196.75),(38,113,34,'2017-05-23',188.85),(38,113,35,'2017-05-24',189.45),(38,113,36,'2017-05-25',190.00),(38,113,37,'2017-05-26',190.55),(38,113,38,'2017-05-29',191.10),(38,113,39,'2017-05-30',191.70),(38,113,40,'2017-05-31',192.25),(38,113,41,'2017-06-01',192.80),(38,113,42,'2017-06-02',193.40),(38,113,43,'2017-06-05',193.95),(38,113,44,'2017-06-06',194.50),(38,113,45,'2017-06-07',195.10),(38,113,46,'2017-06-08',195.65),(38,113,47,'2017-06-09',196.20),(38,113,48,'2017-06-12',196.75),(39,116,34,'2017-05-23',188.85),(39,116,35,'2017-05-24',189.45),(39,116,36,'2017-05-25',190.00),(39,116,37,'2017-05-26',190.55),(39,116,38,'2017-05-29',191.10),(39,116,39,'2017-05-30',191.70),(39,116,40,'2017-05-31',192.25),(39,116,41,'2017-06-01',192.80),(39,116,42,'2017-06-02',193.40),(39,116,43,'2017-06-05',193.95),(39,116,44,'2017-06-06',194.50),(39,116,45,'2017-06-07',195.10),(39,116,46,'2017-06-08',195.65),(39,116,47,'2017-06-09',196.20),(39,116,48,'2017-06-12',196.75),(40,119,34,'2017-05-23',188.85),(40,119,35,'2017-05-24',189.45),(40,119,36,'2017-05-25',190.00),(40,119,37,'2017-05-26',190.55),(40,119,38,'2017-05-29',191.10),(40,119,39,'2017-05-30',191.70),(40,119,40,'2017-05-31',192.25),(40,119,41,'2017-06-01',192.80),(40,119,42,'2017-06-02',193.40),(40,119,43,'2017-06-05',193.95),(40,119,44,'2017-06-06',194.50),(40,119,45,'2017-06-07',195.10),(40,119,46,'2017-06-08',195.65),(40,119,47,'2017-06-09',196.20),(40,119,48,'2017-06-12',196.75),(41,122,34,'2017-05-23',188.85),(41,122,35,'2017-05-24',189.45),(41,122,36,'2017-05-25',190.00),(41,122,37,'2017-05-26',190.55),(41,122,38,'2017-05-29',191.10),(41,122,39,'2017-05-30',191.70),(41,122,40,'2017-05-31',192.25),(41,122,41,'2017-06-01',192.80),(41,122,42,'2017-06-02',193.40),(41,122,43,'2017-06-05',193.95),(41,122,44,'2017-06-06',194.50),(41,122,45,'2017-06-07',195.10),(41,122,46,'2017-06-08',195.65),(41,122,47,'2017-06-09',196.20),(41,122,48,'2017-06-12',196.75),(42,125,34,'2017-05-23',188.85),(42,125,35,'2017-05-24',189.45),(42,125,36,'2017-05-25',190.00),(42,125,37,'2017-05-26',190.55),(42,125,38,'2017-05-29',191.10),(42,125,39,'2017-05-30',191.70),(42,125,40,'2017-05-31',192.25),(42,125,41,'2017-06-01',192.80),(42,125,42,'2017-06-02',193.40),(42,125,43,'2017-06-05',193.95),(42,125,44,'2017-06-06',194.50),(42,125,45,'2017-06-07',195.10),(42,125,46,'2017-06-08',195.65),(42,125,47,'2017-06-09',196.20),(42,125,48,'2017-06-12',196.75),(43,128,34,'2017-05-23',188.85),(43,128,35,'2017-05-24',189.45),(43,128,36,'2017-05-25',190.00),(43,128,37,'2017-05-26',190.55),(43,128,38,'2017-05-29',191.10),(43,128,39,'2017-05-30',191.70),(43,128,40,'2017-05-31',192.25),(43,128,41,'2017-06-01',192.80),(43,128,42,'2017-06-02',193.40),(43,128,43,'2017-06-05',193.95),(43,128,44,'2017-06-06',194.50),(43,128,45,'2017-06-07',195.10),(43,128,46,'2017-06-08',195.65),(43,128,47,'2017-06-09',196.20),(43,128,48,'2017-06-12',196.75),(44,131,34,'2017-05-23',188.85),(44,131,35,'2017-05-24',189.45),(44,131,36,'2017-05-25',190.00),(44,131,37,'2017-05-26',190.55),(44,131,38,'2017-05-29',191.10),(44,131,39,'2017-05-30',191.70),(44,131,40,'2017-05-31',192.25),(44,131,41,'2017-06-01',192.80),(44,131,42,'2017-06-02',193.40),(44,131,43,'2017-06-05',193.95),(44,131,44,'2017-06-06',194.50),(44,131,45,'2017-06-07',195.10),(44,131,46,'2017-06-08',195.65),(44,131,47,'2017-06-09',196.20),(44,131,48,'2017-06-12',196.75),(45,132,34,'2017-05-23',188.85),(45,132,35,'2017-05-24',189.45),(45,132,36,'2017-05-25',190.00),(45,132,37,'2017-05-26',190.55),(45,132,38,'2017-05-29',191.10),(45,132,39,'2017-05-30',191.70),(45,132,40,'2017-05-31',192.25),(45,132,41,'2017-06-01',192.80),(45,132,42,'2017-06-02',193.40),(45,132,43,'2017-06-05',193.95),(45,132,44,'2017-06-06',194.50),(45,132,45,'2017-06-07',195.10),(45,132,46,'2017-06-08',195.65),(45,132,47,'2017-06-09',196.20),(45,132,48,'2017-06-12',196.75),(46,135,34,'2017-05-23',188.85),(46,135,35,'2017-05-24',189.45),(46,135,36,'2017-05-25',190.00),(46,135,37,'2017-05-26',190.55),(46,135,38,'2017-05-29',191.10),(46,135,39,'2017-05-30',191.70),(46,135,40,'2017-05-31',192.25),(46,135,41,'2017-06-01',192.80),(46,135,42,'2017-06-02',193.40),(46,135,43,'2017-06-05',193.95),(46,135,44,'2017-06-06',194.50),(46,135,45,'2017-06-07',195.10),(46,135,46,'2017-06-08',195.65),(46,135,47,'2017-06-09',196.20),(46,135,48,'2017-06-12',196.75);
/*!40000 ALTER TABLE `has_neckline_points` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `has_prediction_rules`
--

DROP TABLE IF EXISTS `has_prediction_rules`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `has_prediction_rules` (
  `rule_id` int(11) NOT NULL,
  `rule_name` varchar(45) DEFAULT NULL,
  `rule_value` float NOT NULL,
  `rule_desc` varchar(500) DEFAULT NULL,
  PRIMARY KEY (`rule_id`),
  UNIQUE KEY `rule_name_UNIQUE` (`rule_name`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `has_prediction_rules`
--

LOCK TABLES `has_prediction_rules` WRITE;
/*!40000 ALTER TABLE `has_prediction_rules` DISABLE KEYS */;
INSERT INTO `has_prediction_rules` VALUES (1,'TARGET_HAS_DURATION_FACTOR',2,'THE FACTOR WITH WHICH THE DURATION NEEDS TO BE MULTIPLIED WHEN TARGET HAS IS TO BE IDENTIFIED'),(2,'BACKTESTING_DURATION_IN_YEARS',3,'BACKTESTING DURATION IN YEARS');
/*!40000 ALTER TABLE `has_prediction_rules` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `identified_has_data`
--

DROP TABLE IF EXISTS `identified_has_data`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `identified_has_data` (
  `has_evaluation_run_id` int(5) NOT NULL,
  `has_id` int(5) NOT NULL,
  `symbol` varchar(45) NOT NULL,
  `first_shoulder_top_row_id` int(5) NOT NULL,
  `first_shoulder_top_date` date DEFAULT NULL,
  `first_shoulder_top_close_price` float DEFAULT NULL,
  `first_shoulder_low_row_id` int(5) DEFAULT NULL,
  `first_shoulder_low_date` date DEFAULT NULL,
  `first_shoulder_low_close_price` float DEFAULT NULL,
  `head_row_id` int(5) DEFAULT NULL,
  `head_date` date DEFAULT NULL,
  `head_close_price` float DEFAULT NULL,
  `head_low_row_id` int(5) DEFAULT NULL,
  `head_low_date` date DEFAULT NULL,
  `head_low_close_price` float DEFAULT NULL,
  `second_shoulder_top_row_id` int(5) DEFAULT NULL,
  `second_shoulder_top_date` date DEFAULT NULL,
  `second_shoulder_top_close_price` float DEFAULT NULL,
  `second_shoulder_low_row_id` int(5) DEFAULT NULL,
  `second_shoulder_low_date` date DEFAULT NULL,
  `second_shoulder_low_close_price` float DEFAULT NULL,
  PRIMARY KEY (`has_evaluation_run_id`,`has_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `identified_has_data`
--

LOCK TABLES `identified_has_data` WRITE;
/*!40000 ALTER TABLE `identified_has_data` DISABLE KEYS */;
INSERT INTO `identified_has_data` VALUES (45,132,'SBIN',31,'2017-05-18',197.5,33,'2017-05-22',188.3,35,'2017-05-24',197.55,36,'2017-05-25',194.25,37,'2017-05-26',195.65,40,'2017-05-31',192.1),(46,135,'SBIN',31,'2017-05-18',197.5,33,'2017-05-22',188.3,35,'2017-05-24',197.55,36,'2017-05-25',194.25,37,'2017-05-26',195.65,40,'2017-05-31',192.1);
/*!40000 ALTER TABLE `identified_has_data` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `identified_has_data_for_backtest`
--

DROP TABLE IF EXISTS `identified_has_data_for_backtest`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `identified_has_data_for_backtest` (
  `has_evaluation_run_id` int(5) NOT NULL,
  `has_id` int(5) NOT NULL,
  `symbol` varchar(45) NOT NULL,
  `first_shoulder_top_row_id` int(5) NOT NULL,
  `first_shoulder_top_date` date DEFAULT NULL,
  `first_shoulder_top_close_price` float DEFAULT NULL,
  `first_shoulder_low_row_id` int(5) DEFAULT NULL,
  `first_shoulder_low_date` date DEFAULT NULL,
  `first_shoulder_low_close_price` float DEFAULT NULL,
  `head_row_id` int(5) DEFAULT NULL,
  `head_date` date DEFAULT NULL,
  `head_close_price` float DEFAULT NULL,
  `head_low_row_id` int(5) DEFAULT NULL,
  `head_low_date` date DEFAULT NULL,
  `head_low_close_price` float DEFAULT NULL,
  `second_shoulder_top_row_id` int(5) DEFAULT NULL,
  `second_shoulder_top_date` date DEFAULT NULL,
  `second_shoulder_top_close_price` float DEFAULT NULL,
  `second_shoulder_low_row_id` int(5) DEFAULT NULL,
  `second_shoulder_low_date` date DEFAULT NULL,
  `second_shoulder_low_close_price` float DEFAULT NULL,
  PRIMARY KEY (`has_evaluation_run_id`,`has_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `identified_has_data_for_backtest`
--

LOCK TABLES `identified_has_data_for_backtest` WRITE;
/*!40000 ALTER TABLE `identified_has_data_for_backtest` DISABLE KEYS */;
INSERT INTO `identified_has_data_for_backtest` VALUES (45,133,'SBIN',27,'2015-07-07',272.9,28,'2015-07-08',267.35,31,'2015-07-13',273.7,33,'2015-07-15',268.05,34,'2015-07-16',272.2,37,'2015-07-21',264.3),(45,134,'SBIN',203,'2016-03-22',197.5,205,'2016-03-28',188.3,207,'2016-03-30',197.55,208,'2016-03-31',194.25,209,'2016-04-01',195.65,212,'2016-04-06',183.85);
/*!40000 ALTER TABLE `identified_has_data_for_backtest` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `identified_has_neckline_data`
--

DROP TABLE IF EXISTS `identified_has_neckline_data`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `identified_has_neckline_data` (
  `has_evaluation_run_id` int(11) NOT NULL,
  `has_id` int(5) NOT NULL,
  `first_shoulder_low_row_id` int(5) DEFAULT NULL,
  `first_shoulder_low_date` date DEFAULT NULL,
  `first_shoulder_low_close_price` float DEFAULT NULL,
  `neckline_slope_value` float DEFAULT NULL,
  PRIMARY KEY (`has_evaluation_run_id`,`has_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `identified_has_neckline_data`
--

LOCK TABLES `identified_has_neckline_data` WRITE;
/*!40000 ALTER TABLE `identified_has_neckline_data` DISABLE KEYS */;
INSERT INTO `identified_has_neckline_data` VALUES (28,85,33,'2017-05-22',188.3,0.3),(29,89,33,'2017-05-22',188.3,0.3),(30,92,33,'2017-05-22',188.3,0.3),(31,95,33,'2017-05-22',188.3,0.3),(32,98,33,'2017-05-22',188.3,0.3),(33,101,33,'2017-05-22',188.3,0.3),(34,104,33,'2017-05-22',188.3,0.3),(35,107,33,'2017-05-22',188.3,0.3),(36,110,33,'2017-05-22',188.3,0.3),(38,113,33,'2017-05-22',188.3,0.3),(39,116,33,'2017-05-22',188.3,0.3),(40,119,33,'2017-05-22',188.3,0.3),(41,122,33,'2017-05-22',188.3,0.3),(42,125,33,'2017-05-22',188.3,0.3),(43,128,33,'2017-05-22',188.3,0.3),(44,131,33,'2017-05-22',188.3,0.3),(45,132,33,'2017-05-22',188.3,0.3),(46,135,33,'2017-05-22',188.3,0.3);
/*!40000 ALTER TABLE `identified_has_neckline_data` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `identified_has_pattern_type`
--

DROP TABLE IF EXISTS `identified_has_pattern_type`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `identified_has_pattern_type` (
  `has_evaluation_run_id` int(11) NOT NULL,
  `has_id` int(11) NOT NULL,
  `identified_pattern_type_id` int(11) DEFAULT NULL,
  PRIMARY KEY (`has_evaluation_run_id`,`has_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `identified_has_pattern_type`
--

LOCK TABLES `identified_has_pattern_type` WRITE;
/*!40000 ALTER TABLE `identified_has_pattern_type` DISABLE KEYS */;
INSERT INTO `identified_has_pattern_type` VALUES (45,132,2),(46,135,2);
/*!40000 ALTER TABLE `identified_has_pattern_type` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `prediction_type`
--

DROP TABLE IF EXISTS `prediction_type`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `prediction_type` (
  `type_id` int(11) NOT NULL,
  `type_name` varchar(45) DEFAULT NULL,
  `type_desc` varchar(250) DEFAULT NULL,
  PRIMARY KEY (`type_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `prediction_type`
--

LOCK TABLES `prediction_type` WRITE;
/*!40000 ALTER TABLE `prediction_type` DISABLE KEYS */;
INSERT INTO `prediction_type` VALUES (1,'current_time','Identify the pattern for current time frame. Not required to analyse wether the pattern was successful. Only needed output is support/resistance types for future dates based on neckline'),(2,'back_testing','Identify the pattern for past dates. Also analyse wether the pattern was successful based upon neckline and volume data.');
/*!40000 ALTER TABLE `prediction_type` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Dumping routines for database 'prediction_has_pattern'
--
/*!50003 DROP PROCEDURE IF EXISTS `CLEAN_DB_DATA` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `CLEAN_DB_DATA`()
BEGIN


DELETE FROM `prediction_has_pattern`.`backtest_has_confidence`;

DELETE FROM `prediction_has_pattern`.`has_evaluation_run`;

DELETE FROM `prediction_has_pattern`.`has_neckline_points`;

DELETE FROM `prediction_has_pattern`.`has_prediction_rules`;

DELETE FROM `prediction_has_pattern`.`identified_has_data`;

DELETE FROM `prediction_has_pattern`.`identified_has_data_for_backtest`;

DELETE FROM `prediction_has_pattern`.`identified_has_neckline_data`;



END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `find_has_main` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `find_has_main`(
symbol_in varchar(45),
duration_days INT,
endDate date)
BEGIN

  DECLARE var_evaluation_run_id int;

  DECLARE var_identified_pattern_type_id int;

  DECLARE VAR_TARGET_HAS_DURATION_FACTOR float DEFAULT 0;

  DECLARE VAR_BACKTESTING_DURATION_IN_YEARS float DEFAULT 0;




SELECT rule_value FROM prediction_has_pattern.has_prediction_rules
where rule_name = 'TARGET_HAS_DURATION_FACTOR' into  VAR_TARGET_HAS_DURATION_FACTOR;

SELECT rule_value FROM prediction_has_pattern.has_prediction_rules
where rule_name = 'BACKTESTING_DURATION_IN_YEARS' into  VAR_BACKTESTING_DURATION_IN_YEARS;

  SET @startDate = DATE_SUB(endDate,INTERVAL (VAR_TARGET_HAS_DURATION_FACTOR*duration_days) day) ;

INSERT INTO prediction_has_pattern.has_evaluation_run
values (null,symbol_in,endDate,duration_days);


select max(a.has_evaluation_run_id) from prediction_has_pattern.has_evaluation_run a
into var_evaluation_run_id;

call prediction_has_pattern.find_target_has(symbol_in,duration_days,@startDate,endDate,var_evaluation_run_id,
                                            var_identified_pattern_type_id);

if var_identified_pattern_type_id = 2
then


-- start backtesting back from already covered period

call prediction_has_pattern.has_backtesting(symbol_in ,
duration_days,
@startDate,
var_evaluation_run_id,
VAR_BACKTESTING_DURATION_IN_YEARS);

end if;


-- replace INTO prediction_has_pattern.identified_has_pattern_type





END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `find_target_has` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `find_target_has`(
symbol_in varchar(45),
duration_days INT,
startDate date,
endDate date,
input_evaluation_run_id int,
out var_identified_pattern_type_id int
)
BEGIN

  DECLARE var_has_id INT;
  DECLARE var_second_shoulder_top_row_id INT;
  DECLARE var_second_shoulder_top_date DATE;
  DECLARE var_second_shoulder_top_close_price FLOAT;

  DECLARE HEAD_DUR_PERC_OF_RALLY float DEFAULT 0.0;

  DECLARE CALCULATED_SECOND_SHOULDER_TO_LOW_DURATION int DEFAULT 0;


  DECLARE identified_has_data_count int;




caLL engine_has_pattern.find_has (symbol_in,duration_days,
                                  startDate, endDate);

select count(*) from engine_has_pattern.identified_has_data into identified_has_data_count;

if (identified_has_data_count >= 1)   then

SELECT rule_value/100 FROM engine_has_pattern.has_pattern_rules
where rule_name = 'HEAD_DURATION_PERCENTAGE_OF_RALLY' into  HEAD_DUR_PERC_OF_RALLY;


SET CALCULATED_SECOND_SHOULDER_TO_LOW_DURATION =    ROUND(2 * duration_days * HEAD_DUR_PERC_OF_RALLY );

delete from  engine_has_pattern.identified_has_pattern_type;

select a.has_id,a.second_shoulder_top_row_id,a.second_shoulder_top_date,
a.second_shoulder_top_close_price from  engine_has_pattern.identified_has_data a
where a.second_shoulder_top_date =
(select max(second_shoulder_top_date) from   engine_has_pattern.identified_has_data)

INTO var_has_id,var_second_shoulder_top_row_id,
                                    var_second_shoulder_top_date,var_second_shoulder_top_close_price;

-- repeat replace to update second shoulder low details ---
 
replace INTO prediction_has_pattern.identified_has_data
(select input_evaluation_run_id,a.* from engine_has_pattern.identified_has_data a
where a.has_id = var_has_id);


call engine_has_pattern.identify_has_pattern_type(duration_days,endDate,var_has_id,var_second_shoulder_top_row_id,
                                    var_second_shoulder_top_close_price,
                                    CALCULATED_SECOND_SHOULDER_TO_LOW_DURATION);

select a.identified_pattern_type_id from  engine_has_pattern.identified_has_pattern_type a

where a.has_id = var_has_id

into var_identified_pattern_type_id;

if   var_identified_pattern_type_id is not null
then

replace INTO prediction_has_pattern.identified_has_data
(select input_evaluation_run_id,a.* from engine_has_pattern.identified_has_data a
where a.has_id = var_has_id);

replace INTO prediction_has_pattern.identified_has_pattern_type
(select input_evaluation_run_id,a.* from engine_has_pattern.identified_has_pattern_type a
where a.has_id = var_has_id);


replace INTO prediction_has_pattern.identified_has_neckline_data
(select input_evaluation_run_id,a.* from engine_has_pattern.identified_has_neckline_data a
where a.has_id = var_has_id);


replace INTO prediction_has_pattern.has_neckline_points
(select input_evaluation_run_id,a.* from engine_has_pattern.has_neckline_points a
where a.has_id = var_has_id);

end if;

end if;



END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `has_backtesting` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `has_backtesting`(
symbol_in varchar(45),
duration_days INT,
endDate date,
input_evaluation_run_id int,
VAR_BACKTESTING_DURATION_IN_YEARS float
)
BEGIN


SET @startDate = DATE_SUB(endDate,INTERVAL VAR_BACKTESTING_DURATION_IN_YEARS year) ;
caLL engine_has_pattern.find_has (symbol_in,duration_days,
                                  @startDate, endDate);

call engine_has_pattern.backtest_identify_all_has_pattern_type(duration_days);

replace into prediction_has_pattern.backtest_has_confidence
(select  input_evaluation_run_id,a.*  from
engine_has_pattern.backtest_has_confidence a);

replace into prediction_has_pattern.identified_has_data_for_backtest
(select  input_evaluation_run_id,a.*  from
engine_has_pattern.identified_has_data a);



END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `prediction_for_rally_duration` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8 */ ;
/*!50003 SET character_set_results = utf8 */ ;
/*!50003 SET collation_connection  = utf8_general_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `prediction_for_rally_duration`(
duration_days int,
symbol_in varchar(45),
endDate date
)
BEGIN

call prediction_has_pattern.find_has_main(symbol_in,duration_days,endDate);


END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!40103 SET TIME_ZONE=@OLD_TIME_ZONE */;

/*!40101 SET SQL_MODE=@OLD_SQL_MODE */;
/*!40014 SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS */;
/*!40014 SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS */;
/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;
/*!40111 SET SQL_NOTES=@OLD_SQL_NOTES */;

-- Dump completed on 2017-06-08 13:46:36
